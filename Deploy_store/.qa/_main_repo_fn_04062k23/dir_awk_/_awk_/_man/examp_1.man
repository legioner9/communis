# https://zalinux.ru/?p=554

# –£—Ä–æ–∫–∏ –ø–æ Awk

## –ß–∞—Å—Ç—å –ø–µ—Ä–≤–∞—è: –¢–∞–∫ —á—Ç–æ —Ç–∞–∫–æ–µ AWK?
Awk, –≥–ª–∞–≤–Ω—ã–º –æ–±—Ä–∞–∑–æ–º, —ç—Ç–æ –ø–æ—Ç–æ–∫–æ–≤—ã–π —Ä–µ–¥–∞–∫—Ç–æ—Ä –≤—Ä–æ–¥–µ sed. –í—ã –º–æ–∂–µ—Ç–µ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –ø–æ —Ç—Ä—É–±–µ —Ç–µ–∫—Å—Ç –≤ —ç—Ç—É –ø—Ä–æ–≥—Ä–∞–º–º—É, –∏ –æ–Ω–∞ –º–æ–∂–µ—Ç –º–∞–Ω–∏–ø—É–ª–∏—Ä–æ–≤–∞—Ç—å –∏–º –ø–æ—Å—Ç—Ä–æ—á–Ω–æ. –ü—Ä–æ–≥—Ä–∞–º–º–∞ —Ç–∞–∫–∂–µ –º–æ–∂–µ—Ç —á–∏—Ç–∞—Ç—å –∏–∑ —Ñ–∞–π–ª–∞. –ï—â—ë awk ‚Äì —ç—Ç–æ —è–∑—ã–∫ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è. –≠—Ç–æ –≤ –æ—Å–Ω–æ–≤–Ω–æ–º –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ awk –º–æ–∂–µ—Ç –¥–µ–ª–∞—Ç—å –≤—Å—ë, —á—Ç–æ –º–æ–∂–µ—Ç sed, –∞ —Ç–∞–∫–∂–µ –µ—â—ë –º–Ω–æ–≥–æ–µ –¥—Ä—É–≥–æ–µ.

–í –æ—Ç–ª–∏—á–∏–µ –æ—Ç sed, awk –º–æ–∂–µ—Ç –ø–æ–º–Ω–∏—Ç—å –∫–æ–Ω—Ç–µ–∫—Å—Ç, –¥–µ–ª–∞—Ç—å —Å—Ä–∞–≤–Ω–µ–Ω–∏—è –∏ –º–Ω–æ–≥–∏–µ –¥—Ä—É–≥–∏–µ –≤–µ—â–∏, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –¥–µ–ª–∞—Ç—å –¥—Ä—É–≥–∏–µ —è–∑—ã–∫–∏ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è. –ù–∞–ø—Ä–∏–º–µ—Ä, –æ–Ω–∞ –Ω–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∞ –µ–¥–∏–Ω–∏—á–Ω–æ–π —Å—Ç—Ä–æ–∫–æ–π. –ü—Ä–∏ –Ω–∞–¥–ª–µ–∂–∞—â–µ–π —Å–Ω–æ—Ä–æ–≤–∫–µ, –æ–Ω–∞ –º–æ–∂–µ—Ç –û–ë–™–ï–î–ò–ù–Ø–¢–¨ –º–Ω–æ–∂–µ—Å—Ç–≤–æ —Å—Ç—Ä–æ–∫.

–°–∞–º–∞—è –ø—Ä–æ—Å—Ç–∞—è —Ñ–æ—Ä–º–∞ awk –≤—ã–≥–ª—è–¥–∏—Ç —Ç–∞–∫:

    awk '{ –∑–¥–µ—Å—å_–∫–∞–∫–æ–µ-—Ç–æ_–¥–µ–π—Å—Ç–≤–∏–µ }'
"–ó–¥–µ—Å—å_–∫–∞–∫–æ–µ-—Ç–æ_–¥–µ–π—Å—Ç–≤–∏–µ" –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—Ä–æ—Å—Ç–æ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ–º –¥–ª—è –ø–µ—á–∞—Ç–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –∏–ª–∏ —á–µ–º-—Ç–æ –Ω–∞–º–Ω–æ–≥–æ –±–æ–ª–µ–µ —Å–ª–æ–∂–Ω—ã–º. –°–∏–Ω—Ç–∞–∫—Å–∏—Å –ø–æ—Ö–æ–∂ –Ω–∞ —è–∑—ã–∫ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è 'C'. –ü—Ä–æ—Å—Ç–æ–π –ø—Ä–∏–º–µ—Ä:

    awk '{print $1,$3}'
–æ–∑–Ω–∞—á–∞–µ—Ç –Ω–∞–ø–µ—á–∞—Ç–∞—Ç—å –ø–µ—Ä–≤—ã–π –∏ —Ç—Ä–µ—Ç–∏–π —Å—Ç–æ–ª–±–µ—Ü, –≥–¥–µ –ø–æ–¥ —Å—Ç–æ–ª–±—Ü–∞–º–∏ –ø–æ–Ω–∏–º–∞—é—Ç—Å—è ¬´–≤–µ—â–∏, —Ä–∞–∑–¥–µ–ª—ë–Ω–Ω—ã–µ –±–µ–ª—ã–º –ø—Ä–æ–±–µ–ª–æ–º¬ª. –ë–µ–ª—ã–π –ø—Ä–æ–±–µ–ª = —Ç–∞–±—É–ª—è—Ü–∏—è –∏–ª–∏ –ø—Ä–æ–±–µ–ª.

–ñ–∏–≤–æ–π –ø—Ä–∏–º–µ—Ä:

    echo '1 2 3 4' | awk '{print $1,$3}'
    1 3

## –ß–∞—Å—Ç—å –≤—Ç–æ—Ä–∞—è: –ß—Ç–æ –º–æ–∂–µ—Ç –¥–µ–ª–∞—Ç—å AWK?
–ì–ª–∞–≤–Ω–∞—è —Ü–µ–ª—å –≤ –∂–∏–∑–Ω–∏ AWK ‚Äì —ç—Ç–æ –º–∞–Ω–∏–ø—É–ª–∏—Ä–æ–≤–∞—Ç—å –µ—ë –≤–≤–æ–¥–æ–º –Ω–∞ –ø–æ—Å—Ç—Ä–æ—á–Ω–æ–π –æ—Å–Ω–æ–≤–µ. –ü—Ä–æ–≥—Ä–∞–º–º–∞ awk –æ–±—ã—á–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ —Å—Ç–∏–ª–µ

    –û–±—Ä–∞–±–æ—Ç–∞—Ç—å —Å—Ç—Ä–æ–∫—É. –î–≤–∏–≥–∞—Ç—å—Å—è –¥–∞–ª—å—à–µ
    –û–±—Ä–∞–±–æ—Ç–∞—Ç—å —Å—Ç—Ä–æ–∫—É. –î–≤–∏–≥–∞—Ç—å—Å—è –¥–∞–ª—å—à–µ
    –û–±—Ä–∞–±–æ—Ç–∞—Ç—å —Å—Ç—Ä–æ–∫—É‚Ä¶
–ï—Å–ª–∏ —Ç–æ, —á—Ç–æ –≤—ã —Ö–æ—Ç–∏—Ç–µ —Å–¥–µ–ª–∞—Ç—å, –Ω–µ –≤–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –≤ —ç—Ç—É –º–æ–¥–µ–ª—å, –∑–Ω–∞—á–∏—Ç awk, –º–æ–∂–µ—Ç –±—ã—Ç—å, –Ω–µ –ø–æ–¥—Ö–æ–¥–∏—Ç –∫ –≤–∞—à–µ–π –∑–∞–¥—É–º–∫–µ.

–û–±—ã—á–Ω—ã–π –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π –≤ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–∏ awk —Å–∏–Ω—Ç–∞–∫—Å–∏—Å –º–æ–∂–Ω–æ –æ–ø–∏—Å–∞—Ç—å —Ç–∞–∫:

    awk –æ–±—Ä–∞–∑–µ—Ü {–∫–æ–º–∞–Ω–¥–∞(—ã)}
–≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ

¬´–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –Ω–∞ –∫–∞–∂–¥—É—é —Å—Ç—Ä–æ–∫—É –≤–≤–æ–¥–∞, –Ω–µ—Ç –ª–∏ —Ç–∞–º –û–ë–†–ê–ó–¶–ê. –ï—Å–ª–∏ –æ–Ω —Ç–∞–º –µ—Å—Ç—å, –∑–∞–ø—É—Å—Ç–∏—Ç—å —Ç–æ, —á—Ç–æ –º–µ–∂–¥—É {}¬ª

–ú–æ–∂–Ω–æ –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å –∏–ª–∏ –û–ë–†–ê–ó–ï–¶ –∏–ª–∏ –ö–û–ú–ê–ù–î–£

–ï—Å–ª–∏ –Ω–µ —É–∫–∞–∑–∞—Ç—å –æ–±—Ä–∞–∑–µ—Ü, —Ç–æ –∫–æ–º–∞–Ω–¥–∞ –±—É–¥–µ—Ç –ø—Ä–∏–º–µ–Ω—è—Ç—å—Å—è –∫ –ö–ê–ñ–î–û–ô —Å—Ç—Ä–æ–∫–µ.

–ï—Å–ª–∏ –ø—Ä–æ–ø—É—â–µ–Ω–∞ –∫–æ–º–∞–Ω–¥–∞, —Ç–æ —ç—Ç–æ —ç–∫–≤–∏–≤–∞–ª–µ–Ω—Ç–Ω–æ —É–∫–∞–∑–∞–Ω–∏—é (–ø—Ä–æ—Å—Ç–æ –Ω–∞–ø–µ—á–∞—Ç–∞—Ç—å —Å—Ç—Ä–æ–∫—É):

    { print }
–ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –ø—Ä–∏–º–µ—Ä—ã:

    awk '/#/ {print "–í —ç—Ç–æ–π —Å—Ç—Ä–æ–∫–µ –µ—Å—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π"}' /etc/hosts
–±—É–¥–µ—Ç –ø–µ—á–∞—Ç–∞—Ç—å ¬´–í —ç—Ç–æ–π —Å—Ç—Ä–æ–∫–µ –µ—Å—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π¬ª –¥–ª—è –∫–∞–∂–¥–æ–π —Å—Ç—Ä–æ–∫–∏, –∫–æ—Ç–æ—Ä–∞—è —Å–æ–¥–µ—Ä–∂–∏—Ç —Ö–æ—Ç—è –±—ã –æ–¥–∏–Ω '#' –≤ –ª—é–±–æ–º –º–µ—Å—Ç–µ —Å—Ç—Ä–æ–∫–∏ –≤ /etc/hosts

–ú–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏—è –¥–ª—è –Ω–∞–≥–ª—è–¥–Ω–æ—Å—Ç–∏

1
awk '/#/ {print $0 ":\t–í —ç—Ç–æ–π —Å—Ç—Ä–æ–∫–µ –µ—Å—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π"}' /etc/hosts
–≠–ª–µ–º–µ–Ω—Ç '//' –≤ –æ–±—Ä–∞–∑—Ü–µ ‚Äì —ç—Ç–æ –æ–¥–∏–Ω –∏–∑ —Å–ø–æ—Å–æ–±–æ–≤ –∑–∞–¥–∞—Ç—å —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ. –ï—Å—Ç—å —Ç–∞–∫–∂–µ –¥—Ä—É–≥–∏–µ —Å–ø–æ—Å–æ–±—ã –∑–∞–¥–∞—Ç—å, —Å–æ–≤–ø–∞–¥–∞–µ—Ç –ª–∏ —Å—Ç—Ä–æ–∫–∞. –ù–∞–ø—Ä–∏–º–µ—Ä,

1
awk '$1 == "#" {print "—Å—Ç—Ä–æ–∫–∞ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å —Ö–µ—à–∞"}' /etc/hosts
–±—É–¥–µ—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞—Ç—å —Å—Ç—Ä–æ–∫–∞–º, –ø–µ—Ä–≤—ã–π —Å—Ç–æ–ª–±–µ—Ü –≤ –∫–æ—Ç–æ—Ä—ã—Ö —è–≤–ª—è–µ—Ç—Å—è –µ–¥–∏–Ω–∏—á–Ω—ã–º '#'. –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Å–∏–º–≤–æ–ª–æ–≤ '==' –æ–∑–Ω–∞—á–∞–µ—Ç –¢–û–ß–ù–û–ï –°–û–í–ü–ê–î–ï–ù–ò–ï –í–°–ï–ì–û –ø–µ—Ä–≤–æ–≥–æ —Å—Ç–æ–ª–±—Ü–∞.

–ú–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏—è –¥–ª—è –Ω–∞–≥–ª—è–¥–Ω–æ—Å—Ç–∏:

1
awk '$1 == "#" {print $0 "\t—Å—Ç—Ä–æ–∫–∞ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å —Ö–µ—à–∞"}' /etc/hosts
–° –¥—Ä—É–≥–æ–π —Å—Ç–æ—Ä–æ–Ω—ã, –µ—Å–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ —á–∞—Å—Ç–∏—á–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Å—Ç–æ–ª–±—Ü–∞, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ–ø–µ—Ä–∞—Ç–æ—Ä '~'

1
awk '$1 ~ /#/ {print "–ì–î–ï-–¢–û –≤ —Å—Ç–æ–ª–±—Ü–µ 1 –µ—Å—Ç—å —Ö–µ—à"}' /etc/hosts
–ü–û–ú–ù–ò–¢–ï, –ß–¢–û –ü–ï–†–í–´–ô –°–¢–û–õ–ë–ï–¶ –ú–û–ñ–ï–¢ –ë–´–¢–¨ –ü–û–°–õ–ï –ë–ï–õ–û–ì–û –ü–†–û–ë–ï–õ–ê.

–ú–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏—è –¥–ª—è –Ω–∞–≥–ª—è–¥–Ω–æ—Å—Ç–∏:

1
awk '$1 ~ /#/ {print $0 "\t–ì–î–ï-–¢–û –≤ —Å—Ç–æ–ª–±—Ü–µ 1 –µ—Å—Ç—å —Ö–µ—à"}' /etc/hosts
–í–≤–æ–¥ "# comment" –±—É–¥–µ—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞—Ç—å

–í–≤–æ–¥ " # comment" –±—É–¥–µ—Ç –¢–ê–ö–ñ–ï —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞—Ç—å

–ï—Å–ª–∏ –≤–∞–º –Ω—É–∂–Ω–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ ¬´—Å—Ç—Ä–æ–∫–∞, –∫–æ—Ç–æ—Ä–∞—è –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Ç–æ—á–Ω–æ —Å # –∏ –ø—Ä–æ–±–µ–ª–∞¬ª, –≤—ã –¥–æ–ª–∂–Ω—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

1
awk '/^# / {–¥–µ–ª–∞–π —á—Ç–æ-—Ç–æ}'
–ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ

Awk –æ–±—Ä–∞–±–æ—Ç–∞–µ—Ç –í–°–ï –û–ë–†–ê–ó–¶–´, –∫–æ—Ç–æ—Ä—ã–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç —Ç–µ–∫—É—â–µ–π —Å—Ç—Ä–æ–∫–µ. –ü–æ—ç—Ç–æ–º—É –µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–ª–µ–¥—É—é—â–∏–π –ø—Ä–∏–º–µ—Ä,

1
2
3
4
5
awk '
   /#/ {print "–ï—Å—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π"}
   $1 == "#" {print "–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –≤ –ø–µ—Ä–≤–æ–º —Å—Ç–æ–ª–±—Ü–µ"}
   /^# /  {print "–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –≤ —Å–∞–º–æ–º –Ω–∞—á–∞–ª–µ"}
 ' /etc/hosts
–¢–†–ò –∑–∞–ø–∏—Å–∏ –±—É–¥–µ—Ç –≤—ã–≤–µ–¥–µ–Ω–æ –¥–ª—è —Å—Ç—Ä–æ–∫–∏ –≤—Ä–æ–¥–µ —Å–ª–µ–¥—É—é—â–µ–π:

1
# This is a comment
–î–í–ï –∑–∞–ø–∏—Å–∏ –¥–ª—è

1
  # This is an indented comment
–∏ —Ç–æ–ª—å–∫–æ –æ–¥–Ω–∞ –¥–ª—è

1
1.2.3.4 hostname # a final comment
–û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞

–ù–µ –≤—Å–µ —Å—Ç—Ä–æ–∫–∏ —Å–æ–∑–¥–∞–Ω—ã —Ä–∞–≤–Ω—ã–º–∏, –¥–∞–∂–µ –µ—Å–ª–∏ –æ–Ω–∏ –≤—ã–≥–ª—è–¥—è—Ç –æ–¥–∏–Ω–∞–∫–æ–≤–æ. –ò–Ω–æ–≥–¥–∞ –≤—ã —Ö–æ—Ç–∏—Ç–µ —Å–¥–µ–ª–∞—Ç—å —á—Ç–æ-—Ç–æ —Å–æ —Å—Ç—Ä–æ–∫–æ–π –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Å—Ç—Ä–æ–∫, –∫–æ—Ç–æ—Ä—ã–µ –∏–¥—É—Ç –ø–µ—Ä–µ–¥ –Ω–µ–π.

–ó–¥–µ—Å—å –±—ã—Å—Ç—Ä—ã–π –ø—Ä–∏–º–µ—Ä, –∫–æ—Ç–æ—Ä—ã–π –ø–µ—á–∞—Ç–∞–µ—Ç —Å—Ç—Ä–æ–∫–∏ "ADDR" –µ—Å–ª–∏ –≤—ã –Ω–µ –≤ —Å–µ–∫—Ü–∏–∏ "secret"

1
2
3
4
5
awk '
 
/secretstart/    { secret=1}
/ADDR/       { if(secret==0) print $0 } /* $0 ‚Äì —ç—Ç–æ –ø–æ–ª–Ω–∞—è —Å—Ç—Ä–æ–∫–∞ */
/secretend/      { secret=0} '
–°–ª–µ–¥—É—é—â–µ–µ –Ω–∞–ø–µ—á–∞—Ç–∞–µ—Ç —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ, –∫–æ—Ç–æ—Ä–æ–µ —Å–æ–¥–µ—Ä–∂–∏—Ç –≤–Ω—É—Ç—Ä–∏ "ADDR" –∫—Ä–æ–º–µ —Å–ª—É—á–∞–µ–≤, –µ—Å–ª–∏ –±—ã–ª–∞ —É–≤–∏–¥–µ–Ω–∞ —Å—Ç—Ä–æ–∫–∞ "secretstart". –ü–û–†–Ø–î–û–ö –ò–ú–ï–ï–¢ –ó–ù–ê–ß–ï–ù–ò–ï. –ù–∞–ø—Ä–∏–º–µ—Ä, –µ—Å–ª–∏ –∑–∞–ø–∏—Å–∞—Ç—å —Ç–∞–∫:

1
2
3
4
5
6
awk '
 
/ADDR/       { if(secret==0) print $0 } /* $0 ‚Äì —ç—Ç–æ –ø–æ–ª–Ω–∞—è —Å—Ç—Ä–æ–∫–∞ */
/secretstart/    { secret=1}
 
/secretend/      { secret=0} '
–∏ –¥–∞—Ç—å —Å–ª–µ–¥—É—é—â–∏–π –≤–≤–æ–¥

1
2
3
4
5
6
ADDR a normal addr
secretstart ADDR a secret addr
ADDR another secret addr
a third secret ADDR
secretend
ADDR normal too
—Ç–æ –±—É–¥–µ—Ç –Ω–∞–ø–µ—á–∞—Ç–∞–Ω –ø–µ—Ä–≤—ã–π "secret" addr. –ü—Ä–∏ —Ç–æ–º, —á—Ç–æ –ø–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω—ã–π –ø—Ä–∏–º–µ—Ä —Å–∫—Ä–æ–µ—Ç –æ–±–∞ —Å–µ–∫—Ä–µ—Ç–∞.

–ß–∞—Å—Ç—å —Ç—Ä–µ—Ç—å—è: –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
–ú—ã —É–∂–µ —Å–∫–∞–∑–∞–ª–∏ –ø—Ä–æ –æ–±—ã—á–Ω—ã–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å awk. –°–µ–π—á–∞—Å –¥–∞–≤–∞–π—Ç–µ –Ω–∞—á–Ω—ë–º —Ä–∞—Å—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å –º–æ–¥–Ω—ã–µ —à—Ç—É–∫–∏.

awk –∏–º–µ–µ—Ç ¬´—Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ¬ª —Å—Ç—Ä–æ–∫–∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è: "BEGIN" –∏ "END"

–î–∏—Ä–µ–∫—Ç–∏–≤–∞ BEGIN –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –æ–¥–Ω–∞–∂–¥—ã –ø–µ—Ä–µ–¥ —á—Ç–µ–Ω–∏–µ–º –∫–∞–∫–∏—Ö-–ª–∏–±–æ —Å—Ç—Ä–æ–∫ –∏–∑ –¥–∞–Ω–Ω—ã—Ö, –Ω–∏–∫–æ–≥–¥–∞ —Å–Ω–æ–≤–∞.

–î–∏—Ä–µ–∫—Ç–∏–≤–∞ END –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ –ø—Ä–æ—á—Ç–µ–Ω–∏—è –≤—Å–µ—Ö —Å—Ç—Ä–æ–∫. –ï—Å–ª–∏ –¥–∞–Ω–æ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ñ–∞–π–ª–æ–≤, —Ç–æ –æ–Ω–∞ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Å–∞–º–æ–≥–æ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —Ñ–∞–π–ª–∞.

–û–±—ã—á–Ω–æ –≤—ã –±—É–¥–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å BEGIN –¥–ª—è —Ä–∞–∑–ª–∏—á–Ω–æ–π –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏, –∞ END –¥–ª—è –ø–æ–¥–≤–µ–¥–µ–Ω–∏—è –∏—Ç–æ–≥–æ–≤ –∏–ª–∏ –æ—á–∏—Å—Ç–∫–∏.

–ü—Ä–∏–º–µ—Ä:

1
2
3
4
BEGIN       { maxerrors=3 ; logfile=/var/log/something ; tmpfile=/tmp/blah}
  ...       { blah blah blah }
/^header/   { headercount += 1 }
END     { printf("–≤—Å–µ–≥–æ –ø–æ–¥—Å—á–∏—Ç–∞–Ω–æ –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤=%d\n", headercount);
–≠—Ç–æ—Ç –ø—Ä–∏–º–µ—Ä –ø–æ—Å—á–∏—Ç–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–∞–∑, –∫–æ—Ç–æ—Ä–æ–µ –≤—Å—Ç—Ä–µ—á–∞–µ—Ç—Å—è "header" –≤ —Ñ–∞–π–ª–µ –≤–≤–æ–¥–∞ –∏ –Ω–∞–ø–µ—á–∞—Ç–∞–µ—Ç –æ–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤—Å–µ–≥–æ —Ñ–∞–π–ª–∞.

AWK —Ç–∞–∫–∂–µ –∏–º–µ–µ—Ç –º–Ω–æ–∂–µ—Å—Ç–≤–æ –¥—Ä—É–≥–∏—Ö —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã—Ö –≤–µ–ª–∏—á–∏–Ω, –∫–æ—Ç–æ—Ä—ã–µ –≤—ã –º–æ–∂–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ —Å–µ–∫—Ü–∏–∏ { }. –ù–∞–ø—Ä–∏–º–µ—Ä,

1
print  NF
–¥–∞—Å—Ç –≤–∞–º –æ–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–æ–ª–æ–Ω–æ–∫ (Number of Fields ‚Äì –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ª–µ–π) –≤ —Ç–µ–∫—É—â–µ–π —Å—Ç—Ä–æ–∫–µ. FILENAME –±—É–¥–µ—Ç —Ç–µ–∫—É—â–∏–º –∏–º–µ–Ω–µ–º —Ñ–∞–π–ª–∞, –ø–æ–¥—Ä–∞–∑—É–º–µ–≤–∞–µ—Ç—Å—è, —á—Ç–æ –∏–º—è —Ñ–∞–π–ª–∞ –±—ã–ª–æ –ø–µ—Ä–µ–¥–∞–Ω–æ –≤ awk, –∞ –Ω–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∞ —Ç—Ä—É–±–∞.

–í—ã –ù–ï –ú–û–ñ–ï–¢–ï –ò–ó–ú–ï–ù–ò–¢–¨ NF —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ.

–ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ —Å –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π NR, –∫–æ—Ç–æ—Ä–∞—è –≥–æ–≤–æ—Ä–∏—Ç, –∫–∞–∫ –º–Ω–æ–≥–æ —Å—Ç—Ä–æ–∫ –≤—ã –æ–±—Ä–∞–±–æ—Ç–∞–ª–∏. ("Number of Records" ‚Äì –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø–∏—Å–µ–π)

–ï—Å—Ç—å –∏ –¥—Ä—É–≥–∏–µ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ, –≤—ã –¥–∞–∂–µ —Ç–∞–∫–∏–µ, –∫–æ—Ç–æ—Ä—ã–µ –≤—ã –ú–û–ñ–ï–¢–ï –∏–∑–º–µ–Ω–∏—Ç—å –≤ —Å–µ—Ä–µ–¥–∏–Ω–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã.

–ß–∞—Å—Ç—å —á–µ—Ç–≤—ë—Ä—Ç–∞—è: –ü—Ä–æ—Å—Ç—ã–µ –ø—Ä–∏–º–µ—Ä—ã Awk
–ß—Ç–æ–±—ã –ø—Ä–æ–∏–ª–ª—é—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –∏ –∑–∞–∫—Ä–µ–ø–∏—Ç—å —Å–∫–∞–∑–∞–Ω–Ω–æ–µ, –¥–∞–≤–∞–π—Ç–µ —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º –Ω–µ—Å–∫–æ–ª—å–∫–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö –ø—Ä–∏–º–µ—Ä–æ–≤. –î–ª—è –Ω–∏—Ö –Ω–∞–º –ø–æ–Ω–∞–¥–æ–±—è—Ç—Å—è —Ç—Ä–∏ –Ω–µ–±–æ–ª—å—à–∏—Ö —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö —Ñ–∞–π–ª–∞.

–î–ª—è –ø–æ—Å–ª–µ–¥—É—é—â–∏—Ö –ø—Ä–∏–º–µ—Ä–æ–≤ –¥–∞–≤–∞–π—Ç–µ —Å–æ–∑–¥–∞–¥–∏–º —Ñ–∞–π–ª field_data.txt —Å–æ —Å–ª–µ–¥—É—é—â–∏–º —Å–æ–¥–µ—Ä–∂–∏–º—ã–º:

1
2
3
4
Roses are red,
Violets are blue,
Sugar is sweet,
And so are you.
–í –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–µ —ç—Ç–æ –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å —Ç–∞–∫:

1
echo -e "Roses are red,\nViolets are blue,\nSugar is sweet,\nAnd so are you." > field_data.txt
–°–æ–∑–¥–∞–¥–∏–º —Ñ–∞–π–ª letters.txt —Å–ª–µ–¥—É—é—â–µ–≥–æ —Å–æ–¥–µ—Ä–∂–∞–Ω–∏—è

1
2
3
4
5
6
7
a
bb
ccc
dddd
ggg
hh
i
–í –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–µ —ç—Ç–æ –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å —Ç–∞–∫:

1
echo -e "a\nbb\nccc\ndddd\nggg\nhh\ni" > letters.txt
–ò, –Ω–∞–∫–æ–Ω–µ—Ü, —Å–æ–∑–¥–∞–¥–∏–º —Ñ–∞–π–ª mail-data —Å–æ —Å–ª–µ–¥—É—é—â–∏–º —Å–æ–¥–µ—Ä–∂–∏–º—ã–º:

1
2
3
4
5
6
7
8
9
10
11
Amelia       555-5553     amelia.zodiacusque@gmail.com    F
Anthony      555-3412     anthony.asserturo@hotmail.com   A
Becky        555-7685     becky.algebrarum@gmail.com      A
Bill         555-1675     bill.drowning@hotmail.com       A
Broderick    555-0542     broderick.aliquotiens@yahoo.com R
Camilla      555-2912     camilla.infusarum@skynet.be     R
Fabius       555-1234     fabius.undevicesimus@ucb.edu    F
Julie        555-6699     julie.perscrutabor@skeeve.com   F
Martin       555-6480     martin.codicibus@hotmail.com    A
Samuel       555-3430     samuel.lanceolis@shu.edu        A
Jean-Paul    555-2127     jeanpaul.campanorum@nyu.edu     R
–≠—Ç–æ –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –≤ –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–µ —Ç–∞–∫:

1
wget https://raw.githubusercontent.com/tdhopper/awk-lessons/master/data/mail-data -O mail-data
–ü—Ä–æ—Å—Ç–æ–π –ø–∞—Ç—Ç–µ—Ä–Ω (–æ–±—Ä–∞–∑–µ—Ü)

–ï—Å–ª–∏ –Ω–∞–º –Ω—É–∂–Ω—ã —Å—Ç—Ä–æ–∫–∏ –¥–ª–∏–Ω–Ω–µ–µ, —á–µ–º –¥–≤–∞ —Å–∏–º–≤–æ–ª–∞, –∏ –º—ã —Ö–æ—Ç–∏–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–µ–π—Å—Ç–≤–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é (print), —Ç–æ –º—ã –ø–æ–ª—É—á–∞–µ–º:

1
2
3
4
5
6
awk 'length $0 > 2' letters.txt
bb
ccc
dddd
ggg
hh
$0 ‚Äì —ç—Ç–æ –≤—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è, –∫–æ—Ç–æ—Ä–∞—è —Å–æ–¥–µ—Ä–∂–∏—Ç —Å—Ç—Ä–æ–∫—É.

–ü—Ä–æ—Å—Ç–∞—è —Ñ—É–Ω–∫—Ü–∏—è

–ï—Å–ª–∏ –º—ã –Ω–µ —É–∫–∞–∑—ã–≤–∞–µ–º –æ–±—Ä–∞–∑–µ—Ü, —Ç–æ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞—Ç—å –±—É–¥–µ—Ç –∫–∞–∂–¥–∞—è —Å—Ç—Ä–æ–∫–∞. –¢—Ä–∏–≤–∏–∞–ª—å–Ω—ã–º –¥–µ–π—Å—Ç–≤–∏–µ–º –±—É–¥–µ—Ç –Ω–∞–ø–µ—á–∞—Ç–∞—Ç—å –∫–∞–∂–¥—É—é —Å—Ç—Ä–æ–∫—É:

1
2
3
4
5
6
7
8
awk '{ print }' letters.txt
a
bb
ccc
dddd
ggg
hh
i
–ò—Å–ø–æ–ª—å–∑—É—è —Ñ—É–Ω–∫—Ü–∏—é length –≤ –∫–∞—á–µ—Å—Ç–≤–µ –Ω–∞—à–µ–≥–æ –¥–µ–π—Å—Ç–≤–∏—è, –º—ã –º–æ–∂–µ–º –ø–æ–ª—É—á–∏—Ç—å –¥–ª–∏–Ω—É –∫–∞–∂–¥–æ–π —Å—Ç—Ä–æ–∫–∏:

1
2
3
4
5
6
7
8
awk '{ print length }' letters.txt
1
2
3
4
3
2
1
–≠—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –±–µ–∑–æ–≥–æ–≤–æ—Ä–æ—á–Ω–æ –∫ —Ü–µ–ª–æ–π —Å—Ç—Ä–æ–∫–µ. –ú—ã —Ç–∞–∫–∂–µ –º–æ–∂–µ–º —É–∫–∞–∑–∞—Ç—å —ç—Ç–æ —è–≤–Ω–æ:

1
2
3
4
5
6
7
8
awk '{ print length $0 }' letters.txt
1a
2bb
3ccc
4dddd
3ggg
2hh
1i
Awk –∏–º–µ–µ—Ç —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –Ω–µ–∫–æ—Ç–æ—Ä–æ–≥–æ –∫–æ–¥–∞ –ø–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º –≤–≤–æ–¥–∞ —Ñ–∞–π–ª–∞ –∏ –ø–æ—Å–ª–µ –µ–≥–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è.

1
2
3
4
5
6
7
8
9
10
awk 'BEGIN { print "HI" } { print $0 } END { print "BYE!" }' letters.txt
HI
a
bb
ccc
dddd
ggg
hh
i
BYE!
–ú—ã –º–æ–∂–µ–º –∏–º–µ—Ç—å –±–æ–ª—å—à–µ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤–æ –≤—Ä–µ–º—è –ø–µ—á–∞—Ç–∏ –∏—Å–ø–æ–ª—å–∑—É—è printf.

1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
awk 'BEGIN { printf "%-10s %s\n", "Name", "Number" \
              printf "%-10s %s\n", "----", "------" } \
            { printf "%-10s %s\n", $1, $2 }' mail-data
Name       Number
----       ------
Amelia     555-5553
Anthony    555-3412
Becky      555-7685
Bill       555-1675
Broderick  555-0542
Camilla    555-2912
Fabius     555-1234
Julie      555-6699
Martin     555-6480
Samuel     555-3430
Jean-Paul  555-2127
–°–æ–≤–º–µ—â–∞–µ–º –æ–±—Ä–∞–∑—Ü—ã –∏ —Ñ—É–Ω–∫—Ü–∏–∏

–ö–æ–Ω–µ—á–Ω–æ, –ø–∞—Ç—Ç–µ—Ä–Ω—ã –∏ —Ñ—É–Ω–∫—Ü–∏–∏ –º–æ–∂–Ω–æ —Å–æ–≤–º–µ—â–∞—Ç—å —Ç–∞–∫, —á—Ç–æ —Ñ—É–Ω–∫—Ü–∏—è –±—É–¥–µ—Ç –ø—Ä–∏–º–µ–Ω—è—Ç—å—Å—è —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ —Å—Ç—Ä–æ–∫–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –æ–±—Ä–∞–∑—Ü—É.

–ú—ã –º–æ–∂–µ–º –Ω–∞–ø–µ—á–∞—Ç–∞—Ç—å –¥–ª–∏–Ω—É –≤—Å–µ—Ö —Å—Ç—Ä–æ–∫, –¥–ª–∏–Ω–Ω–µ–µ 2 —Å–∏–º–≤–æ–ª–æ–≤.

1
2
3
4
awk 'length($0) > 2 { print length($0) }' letters.txt
3
4
3
–ù–∞ —Å–∞–º–æ–º –¥–µ–ª–µ, –º—ã –Ω–µ –æ–±—è–∑–∞–Ω—ã –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞—Ç—å Awk —Ç–æ–ª—å–∫–æ –æ–¥–Ω–∏–º –ø–∞—Ç—Ç–µ—Ä–Ω–æ–º! –ú—ã –º–æ–∂–µ–º –∏–º–µ—Ç—å –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–±—Ä–∞–∑—Ü–æ–≤, —Ä–∞–∑–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã—Ö —Ç–æ—á–∫–æ–π —Å –∑–∞–ø—è—Ç–æ–π –∏–ª–∏ –Ω–æ–≤–æ–π —Å—Ç—Ä–æ–∫–æ–π:

1
2
3
4
5
6
awk 'length($0) > 2 { print "Long:  " length($0) }; length($0) < 2 { print "Short: " length($0) }' letters.txt
Short: 1
Long:  3
Long:  4
Long:  3
Short: 1
–ú–Ω–æ–∂–µ—Å—Ç–≤–æ –ø–æ–ª–µ–π

Awk –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–∞ –¥–ª—è –ø—Ä–æ—Å—Ç–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–∞–Ω–Ω—ã—Ö —Å –º–Ω–æ–∂–µ—Å—Ç–≤–æ–º –ø–æ–ª–µ–π –≤ —Ä—è–¥—É. –†–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å –ø–æ–ª–µ–π –º–æ–∂–µ—Ç –±—ã—Ç—å —É–∫–∞–∑–∞–Ω –∫–ª—é—á–æ–º -F.

–ü—Ä–∏–º–µ—Ä —Ñ–∞–π–ª–∞, –≥–¥–µ —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª–µ–º —è–≤–ª—è–µ—Ç—Å—è –ø—Ä–æ–±–µ–ª:

1
2
3
4
5
awk '{ print }' field_data.txt
Roses are red,
Violets are blue,
Sugar is sweet,
And so are you.
–ï—Å–ª–∏ –º—ã —É–∫–∞–∑—ã–≤–∞–µ–º —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å –ø–æ–ª–µ–π, –º—ã –º–æ–∂–µ–º –Ω–∞–ø–µ—á–∞—Ç–∞—Ç—å –≤—Ç–æ—Ä–æ–µ –ø–æ–ª–µ –∫–∞–∂–¥–æ–π —Å—Ç—Ä–æ–∫–∏:

1
2
3
4
5
awk -F " " '{ print $2 }' field_data.txt
are
are
is
so
–ú—ã –Ω–µ –ø–æ–ª—É—á–∏–º –æ—à–∏–±–∫—É, –µ—Å–ª–∏ —Å—Ç—Ä–æ–∫–∞ –Ω–µ –∏–º–µ–µ—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–≥–æ –ø–æ–ª—è; –Ω–∞–º –ø—Ä–æ—Å—Ç–æ –±—É–¥–µ—Ç –ø–æ–∫–∞–∑–∞–Ω–∞ –ø—É—Å—Ç–∞—è —Å—Ç—Ä–æ–∫–∞:

1
2
3
4
5
awk -F " " '{ print $4 }' field_data.txt
 
 
 
you.
–ü–æ—Å–∫–æ–ª—å–∫—É –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª–µ–º –∏ —Ç–∞–∫ —è–≤–ª—è–µ—Ç—Å—è –ø—Ä–æ–±–µ–ª, —Ç–æ –ø—Ä–µ–¥—ã–¥—É—â–∞—è –∫–æ–º–∞–Ω–¥–∞ –¥–∞–ª–∞ –±—ã —Ç–æ—á–Ω–æ —Ç–∞–∫–æ–π –∂–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∏ –±–µ–∑ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –æ–ø—Ü–∏–∏ -F. –î–ª—è –±–æ–ª–µ–µ –æ—Å–º—ã—Å–ª–µ–Ω–Ω–æ–≥–æ –ø—Ä–∏–º–µ—Ä–∞, —Å–æ–∑–¥–∞–¥–∏–º –µ—â—ë –æ–¥–∏–Ω —Ñ–∞–π–ª rates.txt —Å–æ —Å–ª–µ–¥—É—é—â–∏–º —Å–æ–¥–µ—Ä–∂–∏–º—ã–º:

1
2
3
4
5
Pilcrow,Humphrey,3
Pilcrow,Zora,1
Plinius,Oldone,4
Razniecki,Anton,7
Russell,Bertrand,0
–¢–µ–ø–µ—Ä—å –≤ –∫–∞—á–µ—Å—Ç–≤–µ —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—è —É–∫–∞–∂–µ–º , (–∑–∞–ø—è—Ç—É—é) –∏ –≤—ã–≤–µ–¥–µ–º —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –≤—Ç–æ—Ä–æ–≥–æ —Å—Ç–æ–ª–±—Ü–∞:

1
2
3
4
5
6
awk -F "," '{ print $2 }' rates.txt
Humphrey
Zora
Oldone
Anton
Bertrand
–í—ã—Ä–∞–∂–µ–Ω–∏–µ —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—è –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∏—Ä—É–µ—Ç—Å—è –∫–∞–∫ —Ä–µ–≥—É–ª—è—Ä–Ω–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ.

1
2
3
4
5
6
7
8
9
awk -F "((so )?are|is) " '{print "Field 1: " $1 "\nField 2: " $2}' field_data.txt
Field 1: Roses 
Field 2: red,
Field 1: Violets 
Field 2: blue,
Field 1: Sugar 
Field 2: sweet,
Field 1: And 
Field 2: you.
–†–µ–≥—É–ª—è—Ä–Ω—ã–µ –≤—ã—Ä–∞–∂–µ–Ω–∏—è

–û–±—Ä–∞–∑—Ü—ã (–ø–∞—Ç—Ç–µ—Ä–Ω—ã) –º–æ–≥—É—Ç –±—ã—Ç—å —Ä–µ–≥—É–ª—è—Ä–Ω—ã–º–∏ –≤—ã—Ä–∞–∂–µ–Ω–∏—è–º–∏, –∞ –Ω–µ —Ç–æ–ª—å–∫–æ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–º–∏ —Ñ—É–Ω–∫—Ü–∏—è–º–∏.

–ú—ã –º–æ–∂–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ä–µ–≥—É–ª—è—Ä–Ω—ã–µ –≤—ã—Ä–∞–∂–µ–Ω–∏—è –¥–ª—è –ø–æ–∏—Å–∫–∞ –≤—Å–µ—Ö —Å–ª–æ–≤ –≤ –º–∏—Ä–µ Unix —Å 5 –≥–ª–∞—Å–Ω—ã–º–∏ –ø–æ–¥—Ä—è–¥.

1
2
3
4
5
awk '/[aeiou]{5}/' /usr/share/dict/words
cadiueio
Chaouia
euouae
Guauaenok
–ü–µ—Ä–µ–¥–∞—á–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –≤ –ø—Ä–æ–≥—Ä–∞–º–º—É

–û–ø—Ü–∏—è -v –¥–ª—è Awk –ø–æ–∑–≤–æ–ª—è–µ—Ç –Ω–∞–º –ø–µ—Ä–µ–¥–∞—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤ –ø—Ä–æ–≥—Ä–∞–º–º—É. –ù–∞–ø—Ä–∏–º–µ—Ä, –º—ã –º–æ–∂–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —ç—Ç–æ –¥–ª—è –∂—ë—Å—Ç–∫–∏—Ö –∫–æ–Ω—Å—Ç–∞–Ω—Ç –∫–æ–¥–∞.

1
2
awk -v pi=3.1415 'BEGIN { print pi }'
3.1415
–ú—ã —Ç–∞–∫–∂–µ –º–æ–∂–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å -v –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö Bash –∫–∞–∫ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö Awk

1
2
awk -v user=$USER 'BEGIN { print user }'
mial
–í—ã—Ä–∞–∂–µ–Ω–∏—è If-else

If-else –≤—ã—Ä–∞–∂–µ–Ω–∏—è –≤ Awk –∏–º–µ—é—Ç –≤–∏–¥:

1
if (—É—Å–ª–æ–≤–∏–µ) —Ç–µ–ª–æ-—Ç–æ–≥–¥–∞ [else —Ç–µ–ª–æ-–µ—â—ë]
–ù–∞–ø—Ä–∏–º–µ—Ä:

1
2
3
4
5
6
7
8
9
printf "1\n2\n3\n4" | awk \
     '{ \
         if ($1 % 2 == 0) print $1, "is even"; \
         else print $1, "is odd" \
      }'
1 is odd
2 is even
3 is odd
4 is even
–¶–∏–∫–ª—ã

Awk –≤–∫–ª—é—á–∞–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –≤—ã—Ä–∞–∂–µ–Ω–∏–π —Ü–∏–∫–ª–∞: while, do while –∏ for.

–û–Ω–∏ –∏–º–µ—é—Ç –æ–∂–∏–¥–∞–µ–º—ã–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å C.

1
2
3
4
5
6
7
8
9
10
awk \
     'BEGIN { \
         i = 0; \
         while (i < 5) { print i; i+=1; } \
      }'
0
1
2
3
4
1
2
3
4
5
6
awk \
     'BEGIN { \
         i = 0; \
         do { print i; i+=1; } while(i < 0) \
      }'
0
1
2
3
4
5
6
7
8
9
10
awk \
     'BEGIN { \
         i = 0; \
         for(i = 0; i<5; i++) print i \
      }'
0
1
2
3
4
for —Ç–∞–∫–∂–µ –º–æ–∂–µ—Ç –∑–∞–¥–∞–≤–∞—Ç—å —Ü–∏–∫–ª —á–µ—Ä–µ–∑ –∫–ª—é—á–∏ –º–∞—Å—Å–∏–≤–∞, which –±—É–¥–µ—Ç —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–∞ –ø–æ–∑–∂–µ.

–ß–∞—Å—Ç—å –ø—è—Ç–∞—è: –í—ã–∑–æ–≤ —Ñ—É–Ω–∫—Ü–∏–π
–°–ª–µ–¥—É—é—â–∏–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç AWK ‚Äì —ç—Ç–æ –≤—Å–µ –µ–≥–æ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏.

AWK –∏–º–µ–µ—Ç —Ñ—É–Ω–∫—Ü–∏–∏, –∫–æ—Ç–æ—Ä—ã–µ —Å–¥–µ–ª–∞—é—Ç —Å—Ä–µ–¥–Ω–µ–≥–æ C –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç–∞ –≤–µ—Å—å–º–∞ —Å—á–∞—Å—Ç–ª–∏–≤—ã–º. –ó–¥–µ—Å—å —Ç–∞–∫–æ–µ –¥–æ–±—Ä–æ –∫–∞–∫ sin()/cos()/tan(), rand(),index(), sprintf(), tolower(), system()

–§—É–Ω–∫—Ü–∏–∏ —Å–≥—Ä—É–ø–ø–∏—Ä–æ–≤–∞–Ω—ã, –∏—Ö –º–æ–∂–Ω–æ —Ä–∞—Å—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å —Å–ª–µ–¥—É—é—â–∏–º –æ–±—Ä–∞–∑–æ–º:

–ú–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ

1
+, -, /, *, sin(), cos(), tan(), atan(), sqrt(), rand(), srand()
–û–Ω–∏ —Å–∞–º–∏ –∑–∞ —Å–µ–±—è –≥–æ–≤–æ—Ä—è—Ç, –ø–æ –∫—Ä–∞–π–Ω–µ–π –º–µ—Ä–µ, –º–Ω–µ —Ö–æ—á–µ—Ç—Å—è —Ç–∞–∫ –¥—É–º–∞—Ç—å.

–ü—Ä–∏–º–µ—Ä:

1
2
awk -v pi=3.1415 'BEGIN { print exp(1), log(exp(1)), sqrt(2), sin(pi), cos(pi), atan2(pi, 2) }'
2.71828 1 1.41421 9.26536e-05 -1 1.00387
–ü—Ä–æ–≥—Ä–∞–º–º–∞ –º–æ–∂–µ—Ç —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Å–ª—É—á–∞–π–Ω–æ–µ —á–∏—Å–ª–æ –≤ –¥–∏–∞–ø–∞–∑–æ–Ω–µ (0, 1).

1
2
3
awk 'BEGIN { print rand(); print rand() }'
0.237788
0.291066
–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é Awk –Ω–∞—á–∏–Ω–∞–µ—Ç —Å –æ–¥–Ω–æ–≥–æ –∏ —Ç–æ–≥–æ –∂–µ –Ω–∞—á–∞–ª–∞ (—Å–∏–¥–∞) –¥–ª—è Awk. –ó–∞–ø—É—Å–∫ —ç—Ç–æ–π –∫–æ–º–∞–Ω–¥—ã –¥–≤–∞ —Ä–∞–∑–∞ –ø–æ–¥—Ä—è–¥ –≤–æ–∑–≤—Ä–∞—Ç–∏—Ç –æ–¥–∏–Ω–∞–∫–æ–≤—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:

1
2
3
awk 'BEGIN { print rand(); print rand() }'
0.237788
0.291066
–î–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –Ω–∞—á–∞–ª–∞ (—Å–∏–¥–∞) –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é srand:

1
2
3
4
5
6
awk 'BEGIN { srand(10); print rand(); print rand() }'
0.255219
0.898883
awk 'BEGIN { srand(10); print rand(); print rand() }'
0.255219
0.898883
–§—É–Ω–∫—Ü–∏—è int –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç "—Å–∞–º–æ–µ –±–ª–∏–∑–∫–æ–µ —Ü–µ–ª–æ–µ —á–∏—Å–ª–æ –∫ x, —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–Ω–æ–µ –º–µ–∂–¥—É x –∏ –Ω—É–ª—ë–º –∏ —Å –æ—Ç–±—Ä–æ—à–µ–Ω–Ω—ã–º –≤–µ–¥—É—â–∏–º –Ω—É–ª—ë–º".

1
2
3
awk 'BEGIN { print "int(0.9)  =  " int(0.9); print "int(-0.9) = " int(-0.9) }'
int(0.9)  =  0
int(-0.9) = 0
–ú–∞–Ω–∏–ø—É–ª—è—Ü–∏—è —Å—Ç—Ä–æ–∫–∞–º–∏

index() —Å–∫–∞–∂–µ—Ç –≤–∞–º, –≤—Å—Ç—Ä–µ—á–∞–µ—Ç—Å—è –ª–∏, –∞ –µ—Å–ª–∏ –¥–∞, —Ç–æ –≥–¥–µ, —Å—Ç—Ä–æ–∫–∞ –≤ –ø–æ–¥—Å—Ç—Ä–æ–∫–µ.
match() –ø–æ—Ö–æ–∂–∞—è, –Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è —Ä–µ–≥—É–ª—è—Ä–Ω—ã—Ö –≤—ã—Ä–∞–∂–µ–Ω–∏–π.
sprintf() –¥–∞—ë—Ç –≤–∞–º —Å–ø–æ—Å–æ–±—ã —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞—Ç—å –≤—ã–≤–æ–¥ –∏ –ø–æ –ø—É—Ç–∏ –¥–µ–ª–∞—Ç—å –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è. –≠—Ç–æ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –∑–Ω–∞–∫–æ–º–æ –≤—Å–µ–º, –∫—Ç–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª printf() —Å C. –ù–∞–ø—Ä–∏–º–µ—Ä,
1
2
newstring=sprintf("one is a number %d, two is a string %s\n", one,  two);
print  newstring
"%d" –≥–æ–≤–æ—Ä–∏—Ç "–Ω–∞–ø–µ—á–∞—Ç–∞–π –∑–Ω–∞—á–µ–Ω–∏–µ, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–µ –º–Ω–µ, –≤ –≤–∏–¥–µ –¥–µ—Å—è—Ç–∏—á–Ω–æ–≥–æ —á–∏—Å–ª–∞"
"%s" –≥–æ–≤–æ—Ä–∏—Ç "–Ω–∞–ø–µ—á–∞—Ç–∞–π –∑–Ω–∞—á–µ–Ω–∏–µ, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–µ –º–Ω–µ, –≤ –≤–∏–¥–µ —Å—Ç—Ä–æ–∫–∏"

–¢.–µ. –µ—Å–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ –æ–±—ä–µ–¥–∏–Ω–∏—Ç—å –¥–≤–µ —Å—Ç—Ä–æ–∫–∏ –±–µ–∑ —Ä–∞–∑—Ä—ã–≤–æ–≤, –û–î–ò–ù –∏–∑ —Å–ø–æ—Å–æ–±–æ–≤ –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ 

1
newstring=sprintf("%s%s", one,  two)
length() –ø—Ä–æ—Å—Ç–æ –¥–∞—ë—Ç –≤–∞–º –ø—Ä–æ—Å—Ç–æ–π —Å–ø–æ—Å–æ–± –ø–æ–¥—Å—á–∏—Ç–∞—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–∏–º–≤–æ–ª–æ–≤ –≤ —Å—Ç—Ä–æ–∫–µ, –µ—Å–ª–∏ –≤–∞–º —ç—Ç–æ –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è.
substr

–§—É–Ω–∫—Ü–∏—è substr(s, m, n) –≤–æ–∑–≤—Ä–∞—Ç–∏—Ç –ø–æ–¥—Å—Ç—Ä–æ–∫—É –≤ n-—Å–∏–º–≤–æ–ª–æ–≤, –Ω–∞—á–∏–Ω–∞—é—â—É—é—Å—è —Å –ø–æ–∑–∏—Ü–∏–∏ m, –æ—Ç—Å—á–∏—Ç–∞–Ω–Ω–æ–π –æ—Ç 1.

1
2
3
4
5
awk '{ print $1, substr($1, 2, 3) }' field_data.txt
Roses ose
Violets iol
Sugar uga
And nd
index

index(s, t) –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `–ø–æ–∑–∏—Ü–∏—é –≤ s –≤ –∫–æ—Ç–æ—Ä–æ–π –≤—Å—Ç—Ä–µ—á–∞–µ—Ç—Å—è —Å—Ç—Ä–æ–∫–∞ t, –∏–ª–∏ 0 –µ—Å–ª–∏ –æ–Ω–∞ –Ω–µ –≤—Å—Ç—Ä–µ—á–∞–µ—Ç—Å—è.`

–ü–∞—Ç—Ç–µ—Ä–Ω –¥–ª—è index –Ω–µ —è–≤–ª—è–µ—Ç—Å—è —Ä–µ–≥—É–ª—è—Ä–Ω—ã–º –≤—ã—Ä–∞–∂–µ–Ω–∏–µ–º.

1
2
3
4
5
awk '{ print $1, index($1, "s") }' field_data.txt
Roses 3
Violets 7
Sugar 0
And 0
match

match(s, r) –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø–æ–∑–∏—Ü–∏—é –≤ s –≤ –∫–æ—Ç–æ—Ä–æ–π –≤—Å—Ç—Ä–µ—á–∞–µ—Ç—Å—è —Ä–µ–≥—É–ª—è—Ä–Ω–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ r, –∏–ª–∏ 0 –µ—Å–ª–∏ –æ–Ω–æ –Ω–µ –≤—Å—Ç—Ä–µ—á–∞–µ—Ç—Å—è. –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ RSTART –∏ RLENGTH —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç—Å—è –≤ –ø–æ–∑–∏—Ü–∏—é –∏ –¥–ª–∏–Ω—É —Å–æ–≤–ø–∞–¥–∞—é—â–µ–π —Å—Ç—Ä–æ–∫–∏.

match ‚Äì —ç—Ç–æ –∫–∞–∫ index –∫—Ä–æ–º–µ —Ç–æ–≥–æ, —á—Ç–æ –ø–∞—Ç—Ç–µ—Ä–Ω —è–≤–ª—è–µ—Ç—Å—è —Ä–µ–≥—É–ª—è—Ä–Ω—ã–º –≤—ã—Ä–∞–∂–µ–Ω–∏–µ–º.

1
2
3
4
5
awk '{ print $1, match($1, "[sS]") }' field_data.txt 
Roses 3
Violets 7
Sugar 1
And 0
1
2
3
4
5
6
7
8
9
# "–ü–æ–∏—Å–∫ —Ç—Ä—ë—Ö –∏–ª–∏ –±–æ–ª–µ–µ –ø–æ–≤—Ç–æ—Ä—è—é—â–∏—Ö—Å—è –±—É–∫–≤"
awk '{ match($1, "[a-z]{3}"); print $1, "\tpattern start:", RSTART, "\tpattern end:", RLENGTH }' letters.txt
a   pattern start: 0    pattern end: -1
bb  pattern start: 0    pattern end: -1
ccc     pattern start: 1    pattern end: 3
dddd    pattern start: 1    pattern end: 3
ggg     pattern start: 1    pattern end: 3
hh  pattern start: 0    pattern end: -1
i   pattern start: 0    pattern end: -1
split

split(s, a, fs) —Ä–∞—Å—â–µ–ø–ª—è–µ—Ç —Å—Ç—Ä–æ–∫—É –Ω–∞ –º–∞—Å—Å–∏–≤ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ a[1], a[2], ‚Ä¶, a[n], –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç n.

–†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –¥–µ–ª–∞–µ—Ç—Å—è –ø–æ —Ä–µ–≥—É–ª—è—Ä–Ω–æ–º—É –≤—ã—Ä–∞–∂–µ–Ω–∏—é fs –∏–ª–∏ —Å —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª–µ–º –ø–æ–ª–µ–π FS, –µ—Å–ª–∏ fs –Ω–µ –¥–∞–Ω. –ü—É—Å—Ç–∞—è —Å—Ç—Ä–æ–∫–∞ –≤ –∫–∞—á–µ—Å—Ç–≤–µ —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—è –ø–æ–ª–µ–π —Ä–∞—Å—â–µ–ø–ª—è–µ—Ç —Å—Ç—Ä–æ–∫—É –≤ –º–∞—Å—Å–∏–≤ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –ø–æ—Å–∏–º–≤–æ–ª—å–Ω–æ.

1
2
awk 'BEGIN { print split("It-was_the-best_of-times", output_array, "[-_]"), output_array[2], output_array[4] }'
6 was best
sub

sub(r, t, s) –∑–∞–º–µ–Ω—è–µ—Ç –Ω–∞ t –ø–µ—Ä–≤–æ–µ –≤—Ö–æ–∂–¥–µ–Ω–∏–µ —Ä–µ–≥—É–ª—è—Ä–Ω–æ–≥–æ –≤—ã—Ä–∞–∂–µ–Ω–∏—è r –≤ —Å—Ç—Ä–æ–∫–µ s. –ï—Å–ª–∏ –Ω–µ –¥–∞–Ω–∞ s, —Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è $0

s —è–≤–ª—è–µ—Ç—Å—è —Å—Ç—Ä–æ–∫–æ–π, –≤ –∫–æ—Ç–æ—Ä–æ–π –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∑–∞–º–µ–Ω–∞. –í–º–µ—Å—Ç–æ –≤–æ–∑–≤—Ä–∞—Ç–∞ –Ω–æ–≤–æ–π —Å—Ç—Ä–æ–∫–∏ —Å –ø—Ä–æ–∏–∑–≤–µ–¥—ë–Ω–Ω–æ–π –∑–∞–º–µ–Ω–æ–π –±—É–¥–µ—Ç –≤–æ–∑–≤—Ä–∞—â–µ–Ω–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–¥–µ–ª–∞–Ω–Ω—ã—Ö –∑–∞–º–µ–Ω (0 –∏–ª–∏ 1).

1
2
3
4
5
awk 'BEGIN { s = "It was the best of times, it was the worst of times"; \
             print "Num. matches replaced:",  sub("times", "gifs", s ); \
             print s  }'
Num. matches replaced: 1
It was the best of gifs, it was the worst of times
gsub

gsub –¥–µ–ª–∞–µ—Ç —Ç–æ –∂–µ —Å–∞–º–æ–µ, —á—Ç–æ –∏ sub –∑–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ–º —Ç–æ–≥–æ, —á—Ç–æ –∑–∞–º–µ–Ω—è—é—Ç—Å—è –≤—Å–µ –≤—Ö–æ–∂–¥–µ–Ω–∏—è —Ä–µ–≥—É–ª—è—Ä–Ω–æ–≥–æ –≤—ã—Ä–∞–∂–µ–Ω–∏—è; sub –∏ gsub –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–º–µ–Ω.

1
2
3
4
5
6
awk 'BEGIN { s = "It was the best of times, it was the worst of times"; \
             print "Num. matches replaced:", gsub("times", "cats", s ); \
             print s  }'
 
Num. matches replaced: 2
It was the best of cats, it was the worst of cats
1
2
3
4
5
sprintf
sprintf(fmt, expr, ... ) returns the string resulting from formatting expr ...  according to the printf(3) format fmt
 
awk 'BEGIN { x = sprintf("[%8.3f]", 3.141592654); print x }'
[   3.142]
–§—É–Ω–∫—Ü–∏–∏ —É—Ä–æ–≤–Ω—è —Å–∏—Å—Ç–µ–º—ã

system() –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤–∞–º –≤—ã–∑–≤–∞—Ç—å –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–æ –õ–Æ–ë–û–ô –∏—Å–ø–æ–ª–Ω–∏–º—ã–π —Ñ–∞–π–ª –≤ —Å–∏—Å—Ç–µ–º–µ. –¶–µ–ª–µ–≤–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞ –º–æ–∂–µ—Ç –∫–∞–∫ –±—ã—Ç—å –≤ –≤–∞—à–µ–π $PATH, –∏–ª–∏ –≤—ã –º–æ–∂–µ—Ç–µ —É–∫–∞–∑–∞—Ç—å –µ—ë –ø–æ –∞–±—Å–æ–ª—é—Ç–Ω–æ–º—É –ø—É—Ç–∏.

–ù–∞–ø—Ä–∏–º–µ—Ä, —Å—Ç—Ä–∞—à–Ω–æ–µ

1
system("rm -rf $HOME");
–∏–ª–∏

1
system("/bin/kill 1")
–ï—Å–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ –¥–µ–ª–∞—Ç—å –±–æ–ª–µ–µ —Å–ª–æ–∂–Ω—ã–µ –≤–µ—â–∏, –≤—ã, –≤–µ—Ä–æ—è—Ç–Ω–æ, –≤ –∫–æ–Ω–µ—á–Ω–æ–º –∏—Ç–æ–≥–µ –¥–µ–ª–∞–µ—Ç —á—Ç–æ-—Ç–æ –≤—Ä–æ–¥–µ

1
2
sysstring=sprintf("somecommand %s %s", arg1,  arg2);
system(sysstring)
close() ‚Äì —ç—Ç–æ –≤–∞–∂–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è, –∫–æ—Ç–æ—Ä—É—é —á–∞—Å—Ç–æ —É–ø—É—Å–∫–∞—é—Ç –∏–∑ –≤–∏–¥–∞. –í–µ—Ä–æ—è—Ç–Ω–æ, —ç—Ç–æ –∏–∑-–∑–∞ —Ç–æ–≥–æ, —á—Ç–æ –Ω–µ—Ç –æ—á–µ–≤–∏–¥–Ω–æ–≥–æ –≤—ã–∑–æ–≤–∞ open(), –ø–æ—ç—Ç–æ–º—É –Ω–∞—Ä–æ–¥ –Ω–µ –¥—É–º–∞–µ—Ç –ø—Ä–æ –≤—ã–∑–æ–≤ close(). –ò –¥–ª—è –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–∞ —Ü–µ–ª–µ–π —ç—Ç–æ –∏ –Ω–µ –Ω—É–∂–Ω–æ. –ù–æ –≤—ã –î–û–õ–ñ–ù–´ –î–ï–õ–ê–¢–¨ –≠–¢–û, –µ—Å–ª–∏ –≤—ã –∏–º–µ–µ—Ç–µ –¥–µ–ª–æ —Å –±–æ–µ–µ —á–µ–º –æ–¥–Ω–∏–º —Ñ–∞–π–ª–æ–º –≤—ã–≤–æ–¥–∞.

Awk –¥–∞—ë—Ç –≤–∞–º –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –æ—Ç–∫—Ä—ã—Ç—å –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω—ã–π —Ñ–∞–π–ª –Ω–∞ –ª–µ—Ç—É. –ù–∞–ø—Ä–∏–º–µ—Ä

1
/^file/   { print $3 >> $2 }
–¥–æ–ª–∂–µ–Ω –≤–∑—è—Ç—å —Å—Ç—Ä–æ–∫—É "file output here-is-a-word", –æ—Ç–∫—Ä—ã—Ç—å —Ñ–∞–π–ª 'output' –∏ –Ω–∞–ø–µ—á–∞—Ç–∞—Ç—å 'here-is-a-word' –≤ –Ω–µ–≥–æ.

AWK —è–≤–ª—è–µ—Ç—Å—è "—É–º–Ω–æ–π", –≤ —Ç–æ–º, —á—Ç–æ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç, –∫–∞–∫–∏–µ —Ñ–∞–π–ª—ã –≤—ã –æ—Ç–∫—Ä—ã–≤–∞–π—Ç–µ –∏ –°–û–•–†–ê–ù–Ø–ï–¢ –∏—Ö –æ—Ç–∫—Ä—ã—Ç—ã–º–∏. –û–Ω–∞ –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ—Ç, –µ—Å–ª–∏ –≤—ã –æ—Ç–∫—Ä—ã–ª–∏ —Ñ–∞–π–ª –æ–¥–∏–Ω —Ä–∞–∑, –≤—ã, –≤–µ—Ä–æ—è—Ç–Ω–æ, —Å–¥–µ–ª–∞—Ç—å —ç—Ç–æ —Å–Ω–æ–≤–∞. –ö —Å–æ–∂–∞–ª–µ–Ω–∏—é, —ç—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ, –µ—Å–ª–∏ –≤—ã –æ—Ç–∫—Ä–æ–µ—Ç–µ –ú–ù–û–ì–û —Ñ–∞–π–ª–æ–≤, —Ñ–∞–π–ª–æ–≤—ã–µ –¥–µ—Å–∫—Ä–∏–ø—Ç–æ—Ä—ã –º–æ–≥—É—Ç –∑–∞–∫–æ–Ω—á–∏—Ç—å—Å—è. –ü–æ—ç—Ç–æ–º—É, –∫–æ–≥–¥–∞ –≤—ã –∑–Ω–∞–µ—Ç–µ, —á—Ç–æ –∑–∞–∫–æ–Ω—á–∏–ª–∏ —Å —Ñ–∞–π–ª–æ–º, –∑–∞–∫—Ä–æ–π—Ç–µ –µ–≥–æ. –ü–æ—ç—Ç–æ–º—É –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è –ø—Ä–∏–º–µ—Ä–∞ –≤—ã—à–µ, –≤—ã –¥–æ–ª–∂–Ω—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —á—Ç–æ-—Ç–æ –≤ –¥—É—Ö–µ —Å–ª–µ–¥—É—é—â–∏—Ö —Å—Ç—Ä–æ–∫:

1
2
/^file/   { if ( $2 !=  oldfile ) { close( oldfile) };
          print $3 >> $2 ;  oldfile = $2; }
–ß–∞—Å—Ç—å —à–µ—Å—Ç–∞—è: –ú–∞—Å—Å–∏–≤—ã
–ü–æ–Ω—è—Ç–∏–µ –º–∞—Å—Å–∏–≤–∞

–ú—ã —É–∂–µ —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–ª–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∫–∞–∫ –∏–º–µ–Ω–∞, –∫–æ—Ç–æ—Ä—ã–µ —Å–æ–¥–µ—Ä–∂–∞—Ç –∑–Ω–∞—á–µ–Ω–∏–µ. –ú–∞—Å—Å–∏–≤—ã —è–≤–ª—è—é—Ç—Å—è –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ–º –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö. –ú–∞—Å—Å–∏–≤—ã ‚Äì —ç—Ç–æ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ, –∫–æ—Ç–æ—Ä—ã–µ —Å–æ–¥–µ—Ä–∂–∞—Ç –±–æ–ª–µ–µ –æ–¥–Ω–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è. –û–Ω–∏ –º–æ–≥—É—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å –±–æ–ª–µ–µ —á–µ–º –æ–¥–Ω–æ –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ—Å–∫–æ–ª—å–∫—É –∫–∞–∂–¥–æ–µ —ç—Ç–æ –∑–Ω–∞—á–µ–Ω–∏–µ –∏–º–µ–µ—Ç —Å–≤–æ–π –Ω–æ–º–µ—Ä.

–ï—Å–ª–∏ –≤–∞–º –Ω—É–∂–Ω–æ –∏–º–µ—Ç—å —Ç—Ä–∏ –∑–Ω–∞—á–µ–Ω–∏—è, –≤—ã –º–æ–∂–µ—Ç–µ —Å–∫–∞–∑–∞—Ç—å:

1
value1="one"; value2="two"; value3="three";
–ò–õ–ò, –≤—ã –º–æ–∂–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

1
values[1]="one"; values[2]="two"; values[3]="three";
–ü–µ—Ä–≤—ã–π –ø—Ä–∏–º–µ—Ä ‚Äì —ç—Ç–æ —Ç—Ä–∏ —Ä–∞–∑–Ω—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö —Å–æ —Å–≤–æ–∏–º–∏ –∏–º–µ–Ω–∞–º–∏ (–∫–æ—Ç–æ—Ä—ã–µ —Ä–∞–∑–ª–∏—á–∞—é—Ç—Å—è –Ω–∞ –æ–¥–∏–Ω —Å–∏–º–≤–æ–ª). –í—Ç–æ—Ä–æ–π –ø—Ä–∏–º–µ—Ä ‚Äì —ç—Ç–æ –º–∞—Å—Å–∏–≤, –∫–æ—Ç–æ—Ä—ã–π —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ –æ–¥–Ω–æ–π –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π, –Ω–æ —Å–æ–¥–µ—Ä–∂–∏—Ç –º–Ω–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏–µ, –∫–∞–∂–¥–æ–µ –∏–∑ –∫–æ—Ç–æ—Ä—ã—Ö –∏–º–µ–µ—Ç —Å–≤–æ–π –Ω–æ–º–µ—Ä.

–ü—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –≤ –∫–∞—á–µ—Å—Ç–≤–µ –º–∞—Å—Å–∏–≤–∞, –≤—Å–µ–≥–¥–∞ –Ω—É–∂–Ω–æ –ø–æ–º–µ—â–∞—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ –≤ –∫–≤–∞–¥—Ä–∞—Ç–Ω—ã–µ —Å–∫–æ–±–∫–∏ []. –í—ã –º–æ–∂–µ—Ç–µ –≤—ã–±—Ä–∞—Ç—å –ª—é–±–æ–µ –∏–º—è –¥–ª—è –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –º–∞—Å—Å–∏–≤–∞, –Ω–æ —Å —ç—Ç–æ–≥–æ –º–æ–º–µ–Ω—Ç–∞ —ç—Ç–æ –∏–º—è –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¢–û–õ–¨–ö–û –¥–ª—è –º–∞—Å—Å–∏–≤–∞. –í—ã –ù–ï –ú–û–ñ–ï–¢–ï –æ—Å–º—ã—Å–ª–µ–Ω–Ω–æ –¥–µ–ª–∞—Ç—å

1
2
values[1]="one";
values="newvalue";
–¢–µ–º –Ω–µ –º–µ–Ω–µ–µ, –≤—ã –ú–û–ñ–ï–¢–ï –ø–µ—Ä–µ–Ω–∞–∑–Ω–∞—á–∏—Ç—å –≤–µ–ª–∏—á–∏–Ω—ã, –∫–∞–∫ –¥–ª—è –Ω–æ—Ä–º–∞–ª—å–Ω—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö. –¢.–µ. —Å–ª–µ–¥—É—é—â–µ–µ –Ø–í–õ–Ø–ï–¢–°–Ø –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º:

1
2
3
4
values[1]="1";
print values[1];
values[1]="one";
print values[1];
–ò–Ω—Ç–µ—Ä–µ—Å–Ω–æ —Ç–æ, —á—Ç–æ –≤ –æ—Ç–ª–∏—á–∏–µ –æ—Ç –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –¥—Ä—É–≥–∏—Ö —è–∑—ã–∫–æ–≤, –≤—ã –Ω–µ –æ–±—è–∑–∞–Ω—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –Ω–æ–º–µ—Ä–∞. –í –ø—Ä–∏–º–µ—Ä–∞—Ö –≤—ã—à–µ [1],[2],[3] –Ω–∞ —Å–∞–º–æ–º –¥–µ–ª–µ –∏—Å—Ç–æ–ª–∫–æ–≤—ã–≤–∞—é—Ç—Å—è –∫–∞–∫ [¬´1¬ª], [¬´2¬ª], [¬´3¬ª]. –ß—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –≤—ã —Ç–∞–∫–∂–µ –º–æ–∂–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥—Ä—É–≥–∏–µ —Å—Ç—Ä–æ–∫–∏ –≤ –∫–∞—á–µ—Å—Ç–≤–µ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–æ–≤, –∏ —Ä–∞—Å—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å –º–∞—Å—Å–∏–≤ –ø–æ—á—Ç–∏ –∫–∞–∫ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö —Å –æ–¥–Ω–æ–π –∫–æ–ª–æ–Ω–∫–æ–π. –û—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –¥–ª—è —ç—Ç–æ–≥–æ ¬´–∞—Å—Å–æ—Ü–∏–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –º–∞—Å—Å–∏–≤¬ª.

1
2
3
4
5
6
7
numbers["one"]=1;
numbers["two"]=2;
print numbers["one"];
value="two";
print numbers[value];
value=$1;
if(numbers[value] = ""){ print "no such number"; }
–ö–æ–≥–¥–∞ –∏ –∫–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –º–∞—Å—Å–∏–≤—ã

–ú–æ–≥—É—Ç –±—ã—Ç—å —Ä–∞–∑–ª–∏—á–Ω—ã–µ —Å–ª—É—á–∞–µ, –∫–æ–≥–¥–∞ –≤—ã –º–æ–∂–µ—Ç–µ –≤—ã–±—Ä–∞—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –º–∞—Å—Å–∏–≤–æ–≤. –ù–µ–∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å awk –≤–æ–æ–±—â–µ –æ–±—Ö–æ–¥—è—Ç—Å—è –±–µ–∑ –º–∞—Å—Å–∏–≤–æ–≤. –ù–æ —ç—Ç–æ –Ω–µ —Å–æ–≤—Å–µ–º –≤–µ—Ä–Ω–∞—è –ø–æ–∑–∏—Ü–∏—è: –¥–ª—è –º–∞—Å—Å–∏–≤–æ–≤ —Å—É—â–µ—Å—Ç–≤—É—é—Ç —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ, –∫–æ—Ç–æ—Ä—ã–µ, –Ω–∞–ø—Ä–∏–º–µ—Ä, –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –µ–≥–æ —Ä–∞–∑–º–µ—Ä (–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–Ω–∞—á–µ–Ω–∏–π –≤ –º–∞—Å—Å–∏–≤–µ), –∏–º–µ—é—Ç—Å—è —É–¥–æ–±–Ω—ã–µ –¥–ª—è –ø–µ—Ä–µ–±–æ—Ä–∞ —á–ª–µ–Ω–æ–≤ –º–∞—Å—Å–∏–≤–∞ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏, –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç –∑–Ω–∞—á–µ–Ω–∏–µ –≤ –≤–∏–¥–µ –º–∞—Å—Å–∏–≤–∞. –í –ª—é–±–æ–º —Å–ª—É—á–∞–µ, –¥–∞–≤–∞–π—Ç–µ —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø—Ä–∏–º–µ—Ä–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –ø—Ä–∏–≥–æ–¥–∏—Ç—å—Å—è.

–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –¥–ª—è –¥–∞–ª—å–Ω–µ–π—à–µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

–ü—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ awk –≤ –±–æ–ª—å—à–æ–º —Å–∫—Ä–∏–ø—Ç–µ –æ–±–æ–ª–æ—á–∫–∏, –º–æ–∂–Ω–æ —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –≤–æ –≤—Ä–µ–º–µ–Ω–Ω—ã–π —Ñ–∞–π–ª. –ù–æ –º–æ–∂–Ω–æ —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –Ω—É–∂–Ω—ã–µ —Å–ª–æ–≤–∞ –≤ –ø–∞–º—è—Ç—å, –∞ –∑–∞—Ç–µ–º –≤—Å–µ –∏—Ö –Ω–∞–ø–µ—á–∞—Ç–∞—Ç—å –≤ –∫–æ–Ω—Ü–µ, —á—Ç–æ –±—É–¥–µ—Ç –±—ã—Å—Ç—Ä–µ–µ, —á–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ —Ñ–∞–π–ª–∞.

1
2
3
4
5
6
7
8
9
/special/{ savedwords[lnum]=$2; lnum+=1; }
END {
        count=0;
        while(savedwords[count] != "")
        {
            print count,savedwords[count];
            count+=1;
        }
    }
–í–º–µ—Å—Ç–æ –ø—Ä–æ—Å—Ç–æ–≥–æ –≤—ã–≤–æ–¥–∞ —Å–ª–æ–≤, –≤—ã –º–æ–∂–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–µ–∫—Ü–∏—é END —á—Ç–æ–±—ã –ø–µ—Ä–µ–¥ –∏—Ö –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º —Å–¥–µ–ª–∞—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—É—é –æ–±—Ä–∞–±–æ—Ç–∫—É, –∫–æ—Ç–æ—Ä–∞—è –≤–∞–º –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω—É–∂–Ω–∞.

–ï—Å–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ –ø—Ä–∏—Å–≤–æ–∏—Ç—å —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–Ω–¥–µ–∫—Å –∑–Ω–∞—á–µ–Ω–∏—è–º (–¥–ª—è –∏–∑–±–µ–≥–∞–Ω–∏—è –¥—É–±–ª–∏–∫–∞—Ç–æ–≤), –≤—ã –≤–æ–æ–±—â–µ –º–æ–∂–µ—Ç–µ –æ—Ç—Å—ã–ª–∞—Ç—å –∫ –∏—Ö –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ –∏—Ö —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–º —Å—Ç—Ä–æ–∫–∞–º. –ò–ª–∏, –Ω–∞–ø—Ä–∏–º–µ—Ä, —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –º–∞—Å—Å–∏–≤ —Å –∫–æ–ª–æ–Ω–∫–æ–π 3, –ø—Ä–æ–∏–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–æ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–º—É –∑–Ω–∞—á–µ–Ω–∏—é –∫–æ–ª–æ–Ω–∫–∏ 2.

1
2
3
4
5
6
7
{ threecol[$2]=$3 }
END {
        for (v in threecol)
        {
            print v, threecol[v]
        }
    }
–ú–∞—Å—Å–∏–≤—ã –∏ —Ñ—É–Ω–∫—Ü–∏—è split()

–î—Ä—É–≥–∞—è –≥–ª–∞–≤–Ω–∞—è –ø—Ä–∏—á–∏–Ω–∞ –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –º–∞—Å—Å–∏–≤–æ–≤, –µ—Å–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ –¥–µ–ª–∞—Ç—å –ø–æ–¥–ø–æ–ª—è. –î–æ–ø—É—Å—Ç–∏–º —É –≤–∞—Å –µ—Å—Ç—å —Å—Ç—Ä–æ–∫–∞, –∫–æ—Ç–æ—Ä–∞—è –∏–º–µ–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –∫—Ä—É–ø–Ω—ã—Ö –ø–æ–¥—Ä–∞–∑–¥–µ–ª–µ–Ω–∏–π –∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ –º–µ–ª–∫–∏—Ö –ø–æ–¥—Ä–∞–∑–¥–µ–ª–µ–Ω–∏–π. –î—Ä—É–≥–∏–º–∏ —Å–ª–æ–≤–∞–º–∏, –ü–æ–ª—è –≤–µ—Ä—Ö–Ω–µ–≥–æ —É—Ä–æ–≤–Ω—è —Ä–∞–∑–¥–µ–ª—è—é—Ç—Å—è –ø—Ä–æ–±–µ–ª–∞–º–∏, –Ω–æ –∑–∞—Ç–µ–º –≤—ã –ø–æ–ª—É—á–∞–µ—Ç–µ –±–æ–ª–µ–µ –º–∞–ª–µ–Ω—å–∫–∏–µ —Å–ª–æ–≤–∞, —Ä–∞–∑–¥–µ–ª—ë–Ω–Ω—ã–µ –¥–≤–æ–µ—Ç–æ—á–∏—è–º–∏.

1
2
This is a variable:field:type line
There can be multiple:type:values here
–í –ø—Ä–∏–º–µ—Ä–µ –≤—ã—à–µ —á–µ—Ç–≤—ë—Ä—Ç–æ–µ –æ—Ç–¥–µ–ª—ë–Ω–Ω–æ–µ –ø—Ä–æ–±–µ–ª–æ–º –ø–æ–ª–µ –∏–º–µ–µ—Ç –ø–æ–¥–ø–æ–ª—è, —Ä–∞–∑–¥–µ–ª—ë–Ω–Ω—ã–µ –¥–≤–æ–µ—Ç–æ—á–∏—è–º–∏. –¢–µ–ø–µ—Ä—å, –¥–æ–ø—É—Å—Ç–∏–º, –≤—ã —Ö–æ—Ç–∏—Ç–µ —É–∑–Ω–∞—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ –≤—Ç–æ—Ä–æ–≥–æ –ø–æ–¥–ø–æ–ª—è –≤ —á–µ—Ç–≤—ë—Ä—Ç–æ–º –±–æ–ª—å—à–æ–º –ø–æ–ª–µ. –û–¥–∏–Ω –∏–∑ —Å–ø–æ—Å–æ–±–æ–≤ —Å–¥–µ–ª–∞—Ç—å —ç—Ç–æ, –≤—ã–∑–≤–∞—Ç—å –¥–≤–µ awk —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Ç—Ä—É–±–æ–π:

1
awk '{print $4}' | awk -F: '{print $2}'
–î—Ä—É–≥–∏–º —Å–ø–æ—Å–æ–±–æ–º –±—É–¥–µ—Ç –Ω–∞ –ª–µ—Ç—É –∏–∑–º–µ–Ω–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ 'FS', –∫–æ—Ç–æ—Ä–∞—è —Å–æ–¥–µ—Ä–∂–∏—Ç —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å –ø–æ–ª–µ–π (—Å—É–¥—è –ø–æ –≤—Å–µ–º—É, —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–µ —Å–æ –≤—Å–µ–º–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è–º–∏ awk):

1
awk '{ newline=$4; fs=FS; FS=":";  $0=newline; print $2 ; FS=fs; }'
–ù–æ –≤—ã —Ç–∞–∫–∂–µ –º–æ–∂–µ—Ç–µ —Å–¥–µ–ª–∞—Ç—å —ç—Ç–æ —Å –º–∞—Å—Å–∏–≤–∞–º–∏, –∏—Å–ø–æ–ª—å–∑—É—è —Ñ—É–Ω–∫—Ü–∏—é split() —Å–ª–µ–¥—É—é—â–∏–º –æ–±—Ä–∞–∑–æ–º:

1
awk '{ newline=$4; split(newline,subfields,":"); print subfields[2]} '
–í —ç—Ç–æ–º —Å–ª—É—á–∞–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –º–∞—Å—Å–∏–≤–∞ —ç—Ç–æ —Å–∞–º—ã–π –æ–±—ã—á–Ω—ã–π –∏, –≤–æ–∑–º–æ–∂–Ω–æ, —Å–∞–º—ã–π –∏–∑—è—â–Ω—ã–π —Å–ø–æ—Å–æ–± —Å–¥–µ–ª–∞—Ç—å —ç—Ç–æ.

–ò—Ç–∞–∫, Awk –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç—Ä—É–∫—Ç—É—Ä –¥–∞–Ω–Ω—ã—Ö. –ö—Ä–æ–º–µ —Å–∫–∞–ª—è—Ä–Ω—ã—Ö –∏ —Å—Ç—Ä–æ–∫–æ–≤—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö, –≤ —è–∑—ã–∫ –≤—Å—Ç—Ä–æ–µ–Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –º–∞—Å—Å–∏–≤–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö. –•–æ—Ç—è –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ –æ–Ω–∞ –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è ¬´–º–∞—Å—Å–∏–≤—ã¬ª, —ç—Ç–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –Ω–∞ —Å–∞–º–æ–º –¥–µ–ª–µ —è–≤–ª—è–µ—Ç—Å—è –∞—Å—Å–æ—Ü–∏–∏—Ä–æ–≤–∞–Ω–Ω—ã–º –º–∞—Å—Å–∏–≤–æ–º, –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–µ –¥–∞–Ω–Ω—ã—Ö dict –≤ Python.

–ú–∞—Å—Å–∏–≤—ã –Ω–µ –Ω—É–∂–Ω–æ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å. –í—ã –º–æ–∂–µ—Ç–µ –ø—Ä–æ—Å—Ç–æ –Ω–∞—á–∞—Ç—å –ø—Ä–∏—Å–≤–∞–∏–≤–∞—Ç—å –∑–Ω–∞—á–µ–Ω–∏—è. –û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ, —á—Ç–æ –∫–ª—é—á–∞–º–∏ –º–æ–≥—É—Ç –±—ã—Ç—å —Ü–∏—Ñ—Ä—ã –∏–ª–∏ —Å—Ç—Ä–æ–∫–∏. 

1
2
3
4
5
6
7
awk 'BEGIN { \
      a[0] = 1.1; \
      a[0.83] = 0; \
      a["DOG"] = "CAT"; \
      print a[0], a[0.83], a["DOG"] \
     }'
1.1 0 CAT
Awk –Ω–µ –±—É–¥–µ—Ç –ø–µ—á–∞—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –±–µ–∑ –∏–Ω–¥–µ–∫—Å–∞:

1
2
3
4
5
awk 'BEGIN { \
      a["DOG"] = "CAT"; \
      print a \
     }'
awk: cmd. line:3: fatal: attempt to use array `a' in a scalar context
–•–æ—Ç—è –º—ã –º–æ–∂–µ–º —Å–¥–µ–ª–∞—Ç—å —Ü–∏–∫–ª –ø–æ –∫–ª—é—á—É –∏—Å–ø–æ–ª—å–∑—É—è for:

1
2
3
4
5
6
7
8
9
awk 'BEGIN { \
      a[0] = 1.1; \
      a[0.83] = 0; \
      a["DOG"] = "CAT"; \
      for(k in a) print(a[k]) \
      }'
CAT
0
1.1
–ß–∞—Å—Ç—å —Å–µ–¥—å–º–∞—è: AWK –∏ –æ–±–æ–ª–æ—á–∫–∏ (sh/ksh/bash/csh)
–ò–Ω–æ–≥–¥–∞ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞ AWK –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ. –í —ç—Ç–æ–º —Å–ª—É—á–∞–µ –º–æ–∂–Ω–æ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å awk –≤ —Å–∫—Ä–∏–ø—Ç –æ–±–æ–ª–æ—á–∫–∏. –î–∞–ª–µ–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø—Ä–∏–º–µ—Ä–æ–≤ –∫–∞–∫ —ç—Ç–æ –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å.

–ü—Ä–æ—Å—Ç–æ–π –≤—ã–≤–æ–¥

–ò–Ω–æ–≥–¥–∞ —Ö–æ—á–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å awk –ø—Ä–æ—Å—Ç–æ –∫–∞–∫ –ø—Ä–æ–≥—Ä–∞–º–º—É —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è, –∏ —Å–±—Ä–∞—Å—ã–≤–∞—Ç—å –≤—ã–≤–æ–¥ –ø—Ä—è–º–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –°–ª–µ–¥—É—é—â–∏–π —Å–∫—Ä–∏–ø—Ç –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –≤ –∫–∞—á–µ—Å—Ç–≤–∞ –∞—Ä–≥—É–º–µ–Ω—Ç–∞ –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç awk –¥–ª—è –¥–∞–º–ø–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –Ω—ë–º –∏–∑ /etc/passwd.

–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ: –æ–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ, —á—Ç–æ –≤ —Å–∫—Ä–∏–ø—Ç–µ –æ–¥–∏–Ω–∞—Ä–Ω—ã–µ –∫–∞–≤—ã—á–∫–∏ —Ä–∞—Å–∫—Ä—ã–≤–∞—é—Ç—Å—è (–∞ –Ω–µ —è–≤–ª—è—é—Ç—Å—è –≤–ª–æ–∂–µ–Ω–Ω—ã–º–∏) –∏ –º–µ–∂–¥—É –¥–≤—É–º—è —Ä–∞—Å–∫—Ä—ã—Ç—ã–º–∏ –ø–∞—Ä–∞–º–∏ –æ–¥–∏–Ω–∞—Ä–Ω—ã—Ö –∫–∞–≤—ã—á–µ–∫ —Å—Ç–æ–∏—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è $1 (–≤—Ç–æ—Ä–∞—è), –∫–æ—Ç–æ—Ä–∞—è –≤ –¥–∞–Ω–Ω–æ–º —Å–ª—É—á–∞–µ —è–≤–ª—è–µ—Ç—Å—è –∞—Ä–≥—É–º–µ–Ω—Ç–æ–º —Å–∫—Ä–∏–ø—Ç–∞, –≤ —Ç–æ –≤—Ä–µ–º—è –∫–∞–∫ $1 —è–≤–ª—è–µ—Ç—Å—è —á–∞—Å—Ç—å—é —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞ $1 (–æ–∑–Ω–∞—á–∞–µ—Ç –ø–µ—Ä–≤–æ–µ –ø–æ–ª–µ –≤ —Å—Ç—Ä–æ–∫–µ).

1
2
3
4
5
6
#!/bin/sh
 
while [ "$1" != "" ] ; do
    awk -F: '$1 == "'$1'" { print $1,$3} ' /etc/passwd
    shift
done
–ü—Ä–∏—Å–≤–æ–µ–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º –æ–±–æ–ª–æ—á–∫–∏ –≤—ã–≤–æ–¥–∞ awk

–ò–Ω–æ–≥–¥–∞ –º—ã —Ö–æ—Ç–∏–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å awk –ø—Ä–æ—Å—Ç–æ –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ —Å–ø–æ—Å–æ–±–∞ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π. –ò—Å–ø–æ–ª—å–∑—É—è —Ç–µ–º—É passwd, —É –Ω–∞—Å –µ—Å—Ç—å —Å–ø–æ—Å–æ–± —É–∑–Ω–∞—Ç—å —à–µ–ª–ª –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ —É–≤–∏–¥–µ—Ç—å, –≤—Ö–æ–¥–∏—Ç –ª–∏ –æ–Ω –≤ —Å–ø–∏—Å–æ–∫ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã—Ö –æ–±–æ–ª–æ—á–µ–∫.

–ò –æ–ø—è—Ç—å, –æ–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ, –∫–∞–∫ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∑–∞–∫—Ä—ã—Ç–∏–µ –æ–¥–∏–Ω–∞—Ä–Ω—ã—Ö –∫–∞–≤—ã—á–µ–∫ –≤ –≤—ã—Ä–∞–∂–µ–Ω–∏–∏ awk, –ü–æ—Å–ª–µ –∑–∞–∫—Ä—ã—Ç–æ–π (–≤—Ç–æ—Ä–æ–π) –∫–∞–≤—ã—á–∫–∏, $1 —è–≤–ª—è–µ—Ç—Å—è –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π, –≤ –∫–æ—Ç–æ—Ä—É—é –ø–µ—Ä–µ–¥–∞–Ω–æ –∑–Ω–∞—á–µ–Ω–∏–µ –ø–µ—Ä–≤–æ–≥–æ –∞—Ä–≥—É–º–µ–Ω—Ç–∞ —Å–∫—Ä–∏–ø—Ç–∞, –∞ –Ω–µ —á–∞—Å—Ç—å—é —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞ awk.

1
2
3
4
5
6
7
8
9
10
#!/bin/sh
 
user="$1"
if [ "$user" == "" ] ; then echo ERROR: need a username ; exit ; fi
 
usershell=`awk -F: '$1 == "'$1'" { print $7} ' /etc/passwd`
grep -l $usershell /etc/shells
if [ $? -ne 0 ] ; then
        echo ERROR: shell $usershell for user $user not in /etc/shells
fi
–î—Ä—É–≥–∏–µ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã:

1
2
3
4
5
6
7
# –°–º–æ—Ç—Ä–∏—Ç–µ "man regex"
usershell=`awk -F: '/^'$1':/ { print $7} ' /etc/passwd`
echo $usershell;
 
# –¢–æ–ª—å–∫–æ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ awk –ø—Ä–∏–Ω–∏–º–∞—é—Ç -v. –í–∞–º –º–æ–∂–µ—Ç –ø–æ–Ω–∞–¥–æ–±–∏—Ç—å—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å "nawk" –∏–ª–∏ "gawk"
usershell2=`awk -F: -v user=$1 '$1 == user { print $7} ' /etc/passwd`
echo $usershell2;
–û–±—ä—è—Å–Ω–µ–Ω–∏–µ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –≤—ã—à–µ–ø—Ä–∏–≤–µ–¥—ë–Ω–Ω—ã—Ö –º–µ—Ç–æ–¥–æ–≤ –æ—Å—Ç–∞—ë—Ç—Å—è –¥–æ–º–∞—à–Ω–∏–º –∑–∞–¥–∞–Ω–∏–µ–º —á–∏—Ç–∞—Ç–µ–ª—é üôÇ

–ü–µ—Ä–µ–¥–∞—á–∞ –¥–∞–Ω–Ω—ã—Ö –≤ awk –ø–æ —Ç—Ä—É–±–µ

–ò–Ω–æ–≥–¥–∞ —Ö–æ—á–µ—Ç—Å—è –ø–æ–º–µ—Å—Ç–∏—Ç—å awk –≤ –∫–∞—á–µ—Å—Ç–≤–µ —Ñ–∏–ª—å—Ç—Ä–∞ –¥–∞–Ω–Ω—ã—Ö, –≤ –±–æ–ª—å—à—É—é –ø—Ä–æ–≥—Ä–∞–º–º—É –∏–ª–∏ –∫–æ–º–∞–Ω–¥—É –≤ –æ–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–µ, –≤–≤–æ–¥–∏–º—É—é –≤ –∑–∞–ø—Ä–æ—Å –æ–±–æ–ª–æ—á–∫–∏. –ü—Ä–∏–º–µ—Ä —Ç–∞–∫–æ–π –∫–æ–º–∞–Ω–¥—ã –≤ —Å–∫—Ä–∏–ø—Ç–µ (–≤ –∫–∞—á–µ—Å—Ç–≤–µ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤ —Å–∫—Ä–∏–ø—Ç–∞ –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è —Å–ø–∏—Å–æ–∫ —Ñ–∞–π–ª–æ–≤ –ª–æ–≥–æ–≤ –≤–µ–±-—Å–µ—Ä–≤–µ—Ä–∞, –ø–æ—Å–∫–æ–ª—å–∫—É –∑–∞–ø–∏—Å—å –≤ –∂—É—Ä–Ω–∞–ª –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è –∏ –ª–æ–≥–∏ –º–æ–≥—É—Ç –∏–º–µ—Ç—å —Ä–∞–∑–ª–∏—á–Ω—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É, –¥–ª—è —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –≤ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö —Å–ª—É—á–∞—è—Ö –º–æ–∂–µ—Ç –ø–æ–Ω–∞–¥–æ–±–∏—Ç—å—Å—è –ø–æ–¥–ø—Ä–∞–≤–∏—Ç—å –∫–æ–º–∞–Ω–¥—ã):

1
2
3
#!/bin/sh
 
grep -h ' /index.html' $* | awk -F\" '{print $4}' | sort -u
–í–æ–ø—Ä–æ—Å—ã –∏ –æ—Ç–≤–µ—Ç—ã –ø–æ awk
–ö–∞–∫ –≤—ã–≤–µ—Å—Ç–∏ —Ç–æ–ª—å–∫–æ —Å—Ç—Ä–æ–∫—É –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–≥–æ –Ω–æ–º–µ—Ä–∞ –≤ awk
–ß—Ç–æ–±—ã –≤—ã–≤–µ—Å—Ç–∏ —Å—Ç—Ä–æ–∫–∏ —Å –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã–º –Ω–æ–º–µ—Ä–æ–º, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ if() –∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é NR.

–ù–∞–ø—Ä–∏–º–µ—Ä, —á—Ç–æ–±—ã –≤—ã–≤–µ—Å—Ç–∏ —Ç–æ–ª—å–∫–æ –≤—Ç–æ—Ä—É—é —Å—Ç—Ä–æ–∫—É:

1
free | awk '{ if (NR == 2) print $7 }'
–ß—Ç–æ–±—ã –≤—ã–≤–µ—Å—Ç–∏ –≤—Ç–æ—Ä—É—é –∏ –≤—Å–µ –ø–æ—Å–ª–µ–¥—É—é—â–∏–µ —Å—Ç—Ä–æ–∫–∏:

1
free | awk '{ if (NR >= 2) print $7 }'
–ß—Ç–æ–±—ã –≤—ã–≤–µ—Å—Ç–∏ –≤—Å–µ —Å—Ç—Ä–æ–∫–∏ —Å 10 –ø–æ 20:

1
awk '{ if (NR >= 10 && NR <= 20) print }' /etc/passwd
–ö–∞–∫ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–∏—Ç—å –≤—ã–≤–æ–¥ –≤ —Ñ–∞–π–ª –≤ awk
–ö–æ–º–∞–Ω–¥—É print –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º –≤—ã–≤–æ–¥–∞ –≤ —Ñ–∞–π–ª.

–ö –ø—Ä–∏–º–µ—Ä—É, —Å–ª–µ–¥—É—é—â–∞—è –∫–æ–º–∞–Ω–¥–∞ —Å–æ—Ö—Ä–∞–Ω–∏—Ç —Å—Ç—Ä–æ–∫–∏ —Å 10 –ø–æ 20 –∏–∑ —Ñ–∞–π–ª–∞ /etc/passwd –≤ —Ñ–∞–π–ª pswd.txt:

1
awk '{ if (NR >= 10 && NR <= 20) print>"pswd.txt" }' /etc/passwd
–°–ª–µ–¥—É—é—â–∞—è –∫–æ–º–∞–Ω–¥–∞ –∏—â–µ—Ç –≤ —Å—Ç—Ä–æ–∫–µ —Å–ª–æ–≤–æ ¬´mial¬ª –∏ –µ—Å–ª–∏ –æ–Ω–æ —Ç–∞–º –≤—Å—Ç—Ä–µ—á–∞–µ—Ç—Å—è, —Ç–æ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤—Å—é —Å—Ç—Ä–æ–∫—É –≤ —Ñ–∞–π–ª pswd.txt:

1
awk '/mial/{ print>"pswd.txt" }' /etc/passwd
–ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤ awk
–°–ª–µ–¥—É—é—â–∞—è –∫–æ–º–∞–Ω–¥–∞ –ø–æ—Å—á–∏—Ç–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç—Ä–æ–∫ —Å–æ–¥–µ—Ä–∂–∞—â–∏—Ö —Å–ª–æ–≤–æ ¬´bash¬ª –≤ —Ñ–∞–π–ª–µ /etc/passwd, –≤—ã–≤–µ–¥–µ—Ç –∫–∞–∂–¥—É—é –∏–∑ —ç—Ç–∏—Ö —Å—Ç—Ä–æ–∫ –∏ –∑–∞—Ç–µ–º –≤—ã–≤–µ–¥–µ—Ç –æ–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö —Å—Ç—Ä–æ–∫:

1
awk -v y=0 '/bash/{ y++; print $0 } END { print "–í—Å–µ–≥–æ –Ω–∞–π–¥–µ–Ω–æ —Å—Ç—Ä–æ–∫ —Å bash: " y }' /etc/passwd
–ü—Ä–∏ –∑–∞–ø—É—Å–∫–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã –∏–Ω–∏—Ü–∏–∏—Ä—É–µ—Ç—Å—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è y —Å–æ –∑–Ω–∞—á–µ–Ω–∏–µ–º 0. –ü—Ä–∏ –∫–∞–∂–¥–æ–º —Å–æ–≤–ø–∞–¥–µ–Ω–∏–∏ (–Ω–∞–π–¥–µ–Ω–∞ —Å—Ç—Ä–æ–∫–∞ ¬´bash¬ª), –∑–Ω–∞—á–µ–Ω–∏–µ y —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è –Ω–∞ –µ–¥–∏–Ω–∏—Ü—É –∏ –≤—ã–≤–æ–¥–∏—Ç—Å—è –Ω–∞–π–¥–µ–Ω–Ω–∞—è —Å—Ç—Ä–æ–∫–∞. –í –∫–æ–Ω—Ü–µ –≤—ã–≤–æ–¥–∏—Ç—Å—è –∑–Ω–∞—á–µ–Ω–∏–µ y.

–ö–∞–∫ –≤—ã–≤–µ—Å—Ç–∏ —Å–∫–æ–±–∫–∏ –∏ –¥—Ä—É–≥–∏–µ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –≤ awk
–°–∫–æ–±–∫–∏ –∏ –¥—Ä—É–≥–∏–µ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —Å–∏–º–≤–æ–ª—ã –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø–æ–º–µ—â–∞—Ç—å –≤ –¥–≤–æ–π–Ω—ã–µ –∫–∞–≤—ã—á–∫–∏.

1
awk -F ',' '{ print "(" $1, $2 ")" }'
–í –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö –ø—Ä–∏–º–µ—Ä–∞—Ö –∏–º—è —Ñ–∞–π–ª–∞ —Ç–∞–∫–∂–µ –ø–æ–º–µ—â–µ–Ω–æ –≤ –¥–≤–æ–π–Ω—ã–µ –∫–∞–≤—ã—á–∫–∏ –∏–∑-–∑–∞ —Å–æ–¥–µ—Ä–∂–∞—â–µ–π—Å—è –≤ –Ω—ë–º —Ç–æ—á–∫–∏, –∫–æ—Ç–æ—Ä–∞—è —è–≤–ª—è–µ—Ç—Å—è —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–º —Å–∏–º–≤–æ–ª–æ–º.

–ü—Ä–∏–º–µ—Ä—ã —Ä–µ—à–µ–Ω–∏—è –∑–∞–¥–∞—á —Å –ø–æ–º–æ—â—å—é awk
–ó–∞–¥–∞—á–∞ 1.
–ï—Å—Ç—å —Ñ–∞–π–ª –≤–æ—Ç —Å —Ç–∞–∫–∏–º —Å–æ–¥–µ—Ä–∂–∏–º—ã–º:

1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
–û–†–ì–ê–ù–ò–ó–ê–¶–ò–Ø|
–ù–ê–ß–ò–°–õ–ï–ù–ò–ï|
–ù–ê–ß–ò–°–õ–ï–ù–ò–ï|
–û–†–ì–ê–ù–ò–ó–ê–¶–ò–Ø
–ù–ê–ß–ò–°–õ–ï–ù–ò–ï|
–ù–ê–ß–ò–°–õ–ï–ù–ò–ï|
–ù–ê–ß–ò–°–õ–ï–ù–ò–ï|
–ù–ê–ß–ò–°–õ–ï–ù–ò–ï|
–ù–ê–ß–ò–°–õ–ï–ù–ò–ï|
–ù–ê–ß–ò–°–õ–ï–ù–ò–ï|
–ù–ê–ß–ò–°–õ–ï–ù–ò–ï|
–ù–ê–ß–ò–°–õ–ï–ù–ò–ï|
–ù–ê–ß–ò–°–õ–ï–ù–ò–ï|
–û–†–ì–ê–ù–ò–ó–ê–¶–ò–Ø
–ù–ê–ß–ò–°–õ–ï–ù–ò–ï|
–ù–ê–ß–ò–°–õ–ï–ù–ò–ï|
–û–†–ì–ê–ù–ò–ó–ê–¶–ò–Ø
–ù–ê–ß–ò–°–õ–ï–ù–ò–ï|
–ù–ê–ß–ò–°–õ–ï–ù–ò–ï|
–ù–ê–ß–ò–°–õ–ï–ù–ò–ï|
–ù–ê–ß–ò–°–õ–ï–ù–ò–ï|
–ù–ê–ß–ò–°–õ–ï–ù–ò–ï|
–ù–ê–ß–ò–°–õ–ï–ù–ò–ï|
–ù–ê–ß–ò–°–õ–ï–ù–ò–ï|
–û–†–ì–ê–ù–ò–ó–ê–¶–ò–Ø
–ù–ê–ß–ò–°–õ–ï–ù–ò–ï|
–ù–ê–ß–ò–°–õ–ï–ù–ò–ï|
–û–†–ì–ê–ù–ò–ó–ê–¶–ò–Ø
–ù–ê–ß–ò–°–õ–ï–ù–ò–ï|
–ù–ê–ß–ò–°–õ–ï–ù–ò–ï|
–ù–ê–ß–ò–°–õ–ï–ù–ò–ï|
–¢–∞–∫–∏—Ö —Å—Ç—Ä–æ–∫ –º–æ–∂–µ—Ç –±—ã—Ç—å –ª—é–±–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ, –∫–∞–∫ –≤ –º–µ–Ω—å—à—É—é, —Ç–∞–∫ –∏ –≤ –±–æ–ª—å—à—É—é —Å—Ç–æ—Ä–æ–Ω—É. –ü–æ—Å–ª–µ —Å–ª–æ–≤ "–û–†–ì–ê–ù–ò–ó–ê–¶–ò–Ø" —Å—Ç—Ä–æ–∫–∞ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç—Å—è –Ω–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ–º –∏ —Ä–µ–∫–≤–∏–∑–∏—Ç–∞–º–∏ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏.

–ü–æ—Å–ª–µ —Å–ª–æ–≤ "–ù–ê–ß–ò–°–õ–ï–ù–ò–ï" —Å—Ç—Ä–æ–∫–∞ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç—Å—è —Å—É–º–º–æ–π –Ω–∞—á–∏—Å–ª–µ–Ω–∏—è –∏ –ø—Ä–æ—á–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏.

–†–∞–∑–¥–µ–ª–∏—Ç–µ–ª–µ–º —è–≤–ª—è–µ—Ç—Å—è —Ç—Ä—É–±–∞: |

–ó–∞–¥–∞—á–∞ —Ç–∞–∫–∞—è ‚Äî —Å –ø–æ–º–æ—â—å—é awk –Ω–∞–π—Ç–∏ —Å–ª–æ–≤–æ "–û–†–ì–ê–ù–ò–ó–ê–¶–ò–Ø", —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —ç—Ç–æ–π —Å—Ç—Ä–æ–∫–∏ –∏ –ø—Ä–∏–≤—è–∑–∞–Ω–Ω—ã–µ –∫ –Ω–µ–π —Å—Ç—Ä–æ–∫–∏ "–ù–ê–ß–ò–°–õ–ï–ù–ò–ï".

–¢.–µ. –ø–µ—Ä–≤—É—é —Å—Ç—Ä–æ–∫—É "–û–†–ì–ê–ù–ò–ó–ê–¶–ò–Ø" –∏ –¥–≤–µ —Å—Ç—Ä–æ–∫–∏ –Ω–∏–∂–µ —Å–æ —Å–ª–æ–≤–æ–º "–ù–ê–ß–ò–°–õ–ï–ù–ò–ï". –í—ã–≤–µ—Å—Ç–∏ —ç—Ç–∏ 3 —Å—Ç—Ä–æ–∫–∏ –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π —Ñ–∞–π–ª. –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç—Ä–æ–∫ –º–æ–∂–µ—Ç –±—ã—Ç—å –ª—é–±—ã–º.

–ù–∞–π—Ç–∏ —Å–ª–µ–¥—É—é—â–∏–µ —Å—Ç—Ä–æ–∫–∏ –ø–æ —Ç–∞–∫–æ–º—É –∂–µ –ø—Ä–∏–Ω—Ü–∏–ø—É –∏ –æ–ø—è—Ç—å –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π —Ñ–∞–π–ª.

–ü–æ —ç—Ç–æ–º—É –ø—Ä–∏–º–µ—Ä—É –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å 6 —Ñ–∞–π–ª–æ–≤ –∏ –∫–∞–∂–¥—ã–π —Å–æ —Å–≤–æ–µ–π –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–µ–π –∏ –Ω–∞—á–∏—Å–ª–µ–Ω–∏—è–º–∏.

–†–µ—à–µ–Ω–∏–µ 1. –†–∞–±–æ—Ç–∞–µ—Ç –≤ awk –ø–æ–¥ Linux
1
awk -v y=0 '/–û–†–ì–ê–ù–ò–ó–ê–¶–ò–Ø/{if(x) print x>y; x=$0 ;y++} !/–û–†–ì–ê–ù–ò–ó–ê–¶–ò–Ø/{x=x"\r\n"$0} END {print x>y}' test.txt


–†–µ—à–µ–Ω–∏–µ 2. –†–∞–±–æ—Ç–∞–µ—Ç –≤ awk –ø–æ–¥ Windows
1
awk.exe -v y=0 "/–û–†–ì–ê–ù–ò–ó–ê–¶–ò–Ø/{y++; print $0>y\".txt\";} !/–û–†–ì–ê–ù–ò–ó–ê–¶–ò–Ø/{print $0>y\".txt\"}" test.txt
–í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ —Ñ–∞–π–ª–µ test.txt. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–ª–∞—Å—å –≤ cmd (–∞ –Ω–µ –≤ PowerShell).

–°–∫—Ä–∏–Ω—à–æ—Ç:



–°–æ–¥–µ—Ä–∂–∏–º–æ–µ –ø–µ—Ä–≤—ã—Ö —á–µ—Ç—ã—Ä—ë—Ö —Ñ–∞–π–ª–æ–≤:



–ó–∞–¥–∞—á–∞ 2.
–ö–∞–∫ –¥–æ–±–∞–≤–∏—Ç—å –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π —Ñ–∞–π–ª —Å—Ç—Ä–æ–∫—É —Å –Ω—É–∂–Ω—ã–º–∏ –º–Ω–µ –¥–∞–Ω–Ω—ã–º–∏?

–¢.–µ. –µ—Å—Ç—å —Ñ–∞–π–ª, –Ω–∞–ø—Ä–∏–º–µ—Ä, —Å 6 —Å—Ç—Ä–æ–∫–∞–º–∏ –∏ —è —Ö–æ—á—É –¥–æ–±–∞–≤–∏—Ç—å —Å—Ä–æ–∫—É –ø–µ—Ä–µ–¥ 1 —Å—Ç—Ä–æ–∫–æ–π –∏–ª–∏ –¥–æ–±–∞–≤–∏—Ç—å —Å—Ç—Ä–æ–∫—É –≤–æ –≤—Å–µ .txt —Ñ–∞–π–ª—ã –≤ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–π –ø–∞–ø–∫–µ.

–†–µ—à–µ–Ω–∏–µ 1. –†–∞–±–æ—Ç–∞–µ—Ç –≤ awk –ø–æ–¥ Linux
–ò—Ç–∞–∫, —Å–ª–µ–¥—É—é—â–∏–π –ø—Ä–∏–º–µ—Ä —Å—á–∏—Ç—ã–≤–∞–µ—Ç –≤—Å–µ —Ñ–∞–π–ª—ã –∏–∑ —Ç–µ–∫—É—â–µ–≥–æ –∫–∞—Ç–∞–ª–æ–≥–∞ (*). –ï—Å–ª–∏ –Ω—É–∂–Ω–æ, —á—Ç–æ–±—ã —Å—á–∏—Ç—ã–≤–∞–ª —Ç–æ–ª—å–∫–æ —Ñ–∞–π–ª—ã —Å –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã–º —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ–º, —Ç–æ –≤–º–µ—Å—Ç–æ –∑–≤—ë–∑–¥–æ—á–∫–∏ –º–æ–∂–Ω–æ –∑–∞–ø–∏—Å–∞—Ç—å, –Ω–∞–ø—Ä–∏–º–µ—Ä, —Ç–∞–∫ *.txt.

–î–ª—è –∫–∞–∂–¥–æ–≥–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º–æ–≥–æ —Ñ–∞–π–ª–∞ –≤ —Å–∞–º–æ–µ –Ω–∞—á–∞–ª–æ –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è —Å—Ç—Ä–æ–∫–∞ "–°–¢–†–û–ö–ê" ‚Äî –∑–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ –Ω—É–∂–Ω—É—é. –ù–æ–≤—ã–µ —Ñ–∞–π–ª—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ —ç—Ç—É –∂–µ –ø–∞–ø–∫—É, —Å —Ç–∞–∫–∏–º–∏ –∂–µ –∏–º–µ–Ω–∞–º–∏, –Ω–æ –ø–µ—Ä–µ–¥ –∏–º–µ–Ω–µ–º –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –ø—Ä–µ—Ñ–∏–∫—Å "new_" - –ø—Ä–∏ –∂–µ–ª–∞–Ω–∏–∏, –µ–≥–æ –º–æ–∂–Ω–æ —É–¥–∞–ª–∏—Ç—å –∏–ª–∏ –∑–∞–º–µ–Ω–∏—Ç—å –Ω–∞ –¥—Ä—É–≥–æ–π (–≤ –¥–≤—É—Ö –º–µ—Å—Ç–∞—Ö –∫–æ–º–∞–Ω–¥—ã!).

–°–æ–±—Å—Ç–≤–µ–Ω–Ω–æ –∫–æ–º–∞–Ω–¥–∞:

1
awk -v 'OLD_FILENAME=""' '{if(OLD_FILENAME!=FILENAME) print "–°–¢–†–û–ö–ê" > "new_"FILENAME; OLD_FILENAME=FILENAME} {print > "new_"FILENAME;}' *
–õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã:

–ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ awk –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è OLD_FILENAME ‚Äî –∫–æ—Ç–æ—Ä–æ–π –≤ –∫–∞—á–µ—Å—Ç–≤–µ –∑–Ω–∞—á–µ–Ω–∏—è –ø—Ä–∏—Å–≤–∞–∏–≤–∞–µ—Ç—Å—è –ø—É—Å—Ç–∞—è —Å—Ç—Ä–æ–∫–∞
–ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ –∫–∞–∂–¥–æ–π —Å—Ç—Ä–æ–∫–∏, –∑–Ω–∞—á–µ–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π OLD_FILENAME —Å—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç—Å—è —Å–æ –∑–Ω–∞—á–µ–Ω–∏–µ–º –≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–π –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π FILENAME –≤ –∫–æ—Ç–æ—Ä–æ–π (—Å—é—Ä–ø—Ä–∏–∑!) —Å–æ–¥–µ—Ä–∂–∏—Ç—Å—è –∏–º—è —Ç–µ–∫—É—â–µ–≥–æ —Ñ–∞–π–ª–∞. –ï—Å–ª–∏ —ç—Ç–∏ –∑–Ω–∞—á–µ–Ω–∏—è –ù–ï —Ä–∞–≤–Ω—ã, —Ç–æ –≤ —Ñ–∞–π–ª—ã –ø–µ—á–∞—Ç–∞–µ—Ç—Å—è —Å—Ç—Ä–æ–∫–∞ "–°–¢–†–û–ö–ê" –ò –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π OLD_FILENAME –ø—Ä–∏—Å–≤–∞–∏–≤–∞–µ—Ç—Å—è –∑–Ω–∞—á–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ —Å–æ–¥–µ—Ä–∂–∏—Ç FILENAME.
—Å–ª–µ–¥—É—é—â–∞—è —á–∞—Å—Ç—å {print > "new_"FILENAME;} –ø—Ä–æ—Å—Ç–æ –ø–µ—á–∞—Ç–∞–µ—Ç –æ—á–µ—Ä–µ–¥–Ω—É—é —Å—Ç—Ä–æ–∫—É –≤ –Ω–æ–≤—ã–π —Ñ–∞–π–ª
–ø—Ä–∏ –ø–æ—Å–ª–µ–¥—É—é—â–∏—Ö –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è—Ö (–≤—Ç–æ—Ä–∞—è —Å—Ç—Ä–æ–∫–∞, —Ç—Ä–µ—Ç—å—è —Å—Ç—Ä–æ–∫–∞ –∏ —Ç. –¥.) –∑–Ω–∞—á–µ–Ω–∏—è OLD_FILENAME –∏ FILENAME –±—É–¥—É—Ç –æ–¥–∏–Ω–∞–∫–æ–≤—ã–º–∏. –í–ø–ª–æ—Ç—å –¥–æ –º–æ–º–µ–Ω—Ç–∞, –ø–æ–∫–∞ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º—ã–π —Ñ–∞–π–ª –Ω–µ —Å–º–µ–Ω–∏—Ç—Å—è –Ω–∞ –Ω–æ–≤—ã–π. –í —ç—Ç–æ—Ç –º–æ–º–µ–Ω—Ç OLD_FILENAME –∏ FILENAME —Å—Ç–∞–Ω–æ–≤—è—Ç—Å—è –Ω–µ —Ä–∞–≤–Ω—ã –∏ –≤ –Ω–æ–≤—ã–π —Ñ–∞–π–ª –ø–µ—Ä–≤–æ–π –ø–µ—á–∞—Ç–∞–µ—Ç—Å—è —Å—Ç—Ä–æ–∫–∞ "–°–¢–†–û–ö–ê" –∏ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π OLD_FILENAME –ø—Ä–∏—Å–≤–∞–∏–≤–∞–µ—Ç—Å—è –∑–Ω–∞—á–µ–Ω–∏–µ FILENAME
–≤—Å—ë –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç—Å—è, –ø–æ–∫–∞ –≤—Å–µ —Å—Ç—Ä–æ–∫–∏ –≤–æ –≤—Å–µ—Ö —Ñ–∞–π–ª–∞—Ö –Ω–µ –∫–æ–Ω—á–∞—Ç—Å—è
–†–µ—à–µ–Ω–∏–µ 2. –†–∞–±–æ—Ç–∞–µ—Ç –≤ awk –ø–æ–¥ Windows
–î–ª—è Windows (cmd, –∞ –Ω–µ PowerShell):

1
awk.exe -v OLD_FILENAME="" "{if(OLD_FILENAME!=FILENAME) print \"–°–¢–†–û–ö–ê\" > \"new_\"FILENAME; OLD_FILENAME=FILENAME} {print > \"new_\"FILENAME;}" *.txt

